webpackJsonp([127],{QCaC:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=s("UU1J"),n=s("FMx0"),r=s("tF3a"),i=s("GVVA"),o={components:{vBreadcrumb:n.a,icon:t.a,region:r.a},data:function(){return{form:{name:"",userName:"",mobile:"",type:"1",country:"1",address:"",bankName:"",bankOpening:"",bankCard:"",bankUsername:""},first:"",second:"",detailData:[],btnLoading:!1,isUp:!1,id:"",address:"",areaDisabled:!0,phone:!0,secIds:"",brandList:[],brandIds:[]}},activated:function(){this.id=this.$route.query.id||sessionStorage.getItem("supplierDetail"),this.address="",this.getDetail()},methods:{getDetail:function(){var e={id:this.id};this.loading=!0,i.a.findSupplierById(e).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},getRegion:function(e){this.address=e,this.form.provinceCode=this.address[0],this.form.cityCode=this.address[1],this.form.areaCode=this.address[2]},supplierArea:function(){this.areaDisabled=1==this.form.country},checkPhone:function(){if(!/^1[3-8]\d{9}$/.test(this.form.mobile))return this.$message.warning("请输入正确的手机号格式!"),this.phone=!1,!1;this.phone=!0},submitForm:function(e){var a=this;if(a[e].name)if(a[e].username)if(a[e].mobile)if(1!=a.form.country||(this.form.provinceId=this.address[0],this.form.cityId=this.address[1],this.form.areaId=this.address[2],a.form.provinceId&&a.form.cityId&&a.form.areaId))if(a[e].address)if(2!=!a.form.list.length)if(a.form.brandids)if(a.form.bankName)if(a.form.bankOpening)if(a.form.bankCard){if(/^([1-9]{1})(\d{14}|\d{18})$/.test(a.form.bankCard))if(a.form.bankUsername){if(0==a.phone)return!1;a.btnLoading=!0;var s=this[e];s.telephone=a.first+a.second,s.url=pApi.updateSupplier,s.id=a.id,this.$axios.post(api.updateSupplier,s).then(function(e){200==e.data.code?(a.$message.success(e.data.msg),setTimeout(function(){a.$router.push("/supplierManage"),a.btnLoading=!1},1e3)):(a.ajax=!1,a.$message.warning(e.data.msg),a.btnLoading=!1)}).catch(function(e){console.log(e),a.btnLoading=!1,a.ajax=!1})}else a.$message.warning("请输入持卡人姓名!");else a.$message.warning("请输入合法的银行卡号!")}else a.$message.warning("请输入银行卡号!");else a.$message.warning("请输入请输入开户支行!");else a.$message.warning("请输入银行名称!");else a.$message.warning("请选择供应产品品牌!");else a.$message.warning("请选择供应产品品类!");else a.$message.warning("请输入详细地址!");else a.$message.warning("请输入省市区!");else a.$message.warning("请输入联系方式!");else a.$message.warning("请输入供应商姓名!");else a.$message.warning("请输入供货商名称!")},getBrandList:function(){var e=this;i.a.findProductBrandListNoStop({name:""}).then(function(a){e.brandList=[],a.data.forEach(function(a){e.brandList.push({label:a.name,key:a.id})})}).catch(function(e){console.log(e)})},cancel:function(){this.$router.push("/supplierManage")}}},l={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",[s("v-breadcrumb",{attrs:{nav:["经销商会员管理","供应商管理","编辑供应商"]}}),e._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"supplier-box"},[s("el-form",{ref:"form",attrs:{model:e.form}},[s("el-form-item",{attrs:{prop:"name",label:"供应商名称"}},[s("el-input",{attrs:{placeholder:"请输入供应商名称"},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"type",label:"供应商类型",placeholder:"请选择"}},[s("el-select",{model:{value:e.form.type,callback:function(a){e.$set(e.form,"type",a)},expression:"form.type"}},[s("el-option",{attrs:{label:"产品供应商",value:"1"}},[e._v("产品供应商")]),e._v(" "),s("el-option",{attrs:{label:"服务供应商",value:"2"}},[e._v("服务供应商")])],1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"userName",label:"供应商姓名"}},[s("el-input",{attrs:{placeholder:"请输入供应商姓名"},model:{value:e.form.userName,callback:function(a){e.$set(e.form,"userName",a)},expression:"form.userName"}})],1),e._v(" "),s("el-form-item",{staticClass:"phone-area",attrs:{prop:"name",label:"联系方式"}},[s("el-input",{staticClass:"small-inp",model:{value:e.first,callback:function(a){e.first=a},expression:"first"}}),e._v(" "),s("el-input",{staticClass:"mid-inp",model:{value:e.second,callback:function(a){e.second=a},expression:"second"}}),e._v(" "),s("div",{staticClass:"intent"},[s("el-input",{on:{blur:e.checkPhone},model:{value:e.form.mobile,callback:function(a){e.$set(e.form,"mobile",a)},expression:"form.mobile"}})],1)],1),e._v(" "),s("el-form-item",{staticClass:"address-item",attrs:{prop:"country",label:"供应商地址"}},[s("el-select",{staticClass:"small-inp",on:{change:e.supplierArea},model:{value:e.form.country,callback:function(a){e.$set(e.form,"country",a)},expression:"form.country"}},[s("el-option",{attrs:{label:"中国",value:"1"}},[e._v("中国")]),e._v(" "),s("el-option",{attrs:{label:"海外",value:"2"}},[e._v("海外")])],1),e._v(" "),s("div",{staticClass:"address-area"},[s("region",{attrs:{regionMsg:e.address,isDisabled:!e.areaDisabled},on:{regionMsg:e.getRegion}})],1),e._v(" "),s("div",{staticClass:"intent"},[s("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.form.address,callback:function(a){e.$set(e.form,"address",a)},expression:"form.address"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"brandIds",label:"供应产品品类品牌"}},[s("el-transfer",{attrs:{titles:["品牌列表","已选择品牌"],filterable:"","filter-placeholder":"请输入品牌名称",data:e.brandList},model:{value:e.brandIds,callback:function(a){e.brandIds=a},expression:"brandIds"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"供应商账号"}},[s("el-input",{attrs:{placeholder:"请输入银行名称"},model:{value:e.form.bankName,callback:function(a){e.$set(e.form,"bankName",a)},expression:"form.bankName"}}),e._v(" "),s("el-input",{attrs:{placeholder:"请输入开户支行"},model:{value:e.form.bankOpening,callback:function(a){e.$set(e.form,"bankOpening",a)},expression:"form.bankOpening"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"bankCard",label:"卡号"}},[s("el-input",{attrs:{placeholder:"请输入银行卡号"},model:{value:e.form.bankCard,callback:function(a){e.$set(e.form,"bankCard",a)},expression:"form.bankCard"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"bankUsername",label:"持卡人"}},[s("el-input",{attrs:{placeholder:"请输入持卡人姓名"},model:{value:e.form.bankUsername,callback:function(a){e.$set(e.form,"bankUsername",a)},expression:"form.bankUsername"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"endTime",label:"供应商结算帐期："}},[s("p",[e._v("每月15号")])]),e._v(" "),s("div",{staticClass:"submit-btn"},[s("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(a){e.submitForm("form")}}},[e._v("确认保存")]),e._v(" "),s("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]};var m=s("VU/8")(o,l,!1,function(e){s("RWzo")},null,null);a.default=m.exports},RWzo:function(e,a){}});