webpackJsonp([38],{"9AOG":function(t,e){},dIQA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("FMx0"),i=a("9Vdu"),o=a("F30e"),s=a("0xDb"),r=a.n(s),l={props:["name"],components:{},mixins:[a("xnHa").b],data:function(){return{p:{addGiftBag:!1,updateGiftBag:!1,queryReferencePrice:!1,findProductInfo:!1,couponControl:!1,setExperience:!1,getGiftBagDetail:!1,checkGiftBag:!1,giftBagUpOrDown:!1,batchDeleteGiftBag:!1},levelList:[],giftStatus:"",form:{name:"",prodCode:"",level:""},tableData:[],tableLoading:!1,isShowPop:!1,multipleSelection:[]}},computed:{giftStaName:function(){switch(this.name){case"allGift":return"";case"upGift":return"4";case"downGift":return"5";case"auditGift":return"1"}}},created:function(){this.getLevelList(),this.getList(1),this.pControl()},activated:function(){this.getLevelList(),this.getList(1),this.pControl()},methods:{pControl:function(){for(var t in this.p)this.p[t]=r.a.pc(o[t])},getList:function(t){var e=this,a={};a.name=this.form.name,a.code=this.form.prodCode,a.level=this.form.level,a.page=t,a.status=this.giftStaName,this.page.currentPage=t,this.tableLoading=!0,this.$axios.post(i.v,a).then(function(t){e.tableData=[],e.tableData=t.data.data.data,e.page.totalPage=t.data.data.resultCount,e.tableLoading=!1}).catch(function(t){e.tableLoading=!1})},giftUporDown:function(t,e){var a=this;this.$axios.post(i.p,{id:t.id,status:e}).then(function(t){a.$message.success(t.data.msg),a.getList(a.page.currentPage)})},giftAudit:function(t,e){var a=this;this.$axios.post(i.g,{id:t.id,status:e}).then(function(t){a.$message.success(t.data.msg),a.getList(a.page.currentPage)})},getLevelList:function(){var t=this;t.$axios.post(i.m,{}).then(function(e){200==e.data.code?t.levelList=e.data.data:t.$message.warning(e.data.msg)}).catch(function(t){console.log(t)})},resetForm:function(t){this.$refs[t].resetFields(),this.getList(1)},handleSelectionChange:function(t){var e=this;this.multipleSelection=[],t.forEach(function(t,a){e.multipleSelection.push(t.id)})},releaseProduct:function(){this.$router.push({name:"addGift"})},editProduct:function(t){sessionStorage.setItem("giftId",t.id),this.$router.push({name:"editGift",query:{giftId:t.id}})},priceOfInventory:function(t){sessionStorage.setItem("priceOfInventoryId",t.id),this.$router.push({name:"priceOfInventory",query:{priceOfInventoryId:t.id}})},inventoryManage:function(t){sessionStorage.setItem("discountAddId",t.id),this.$router.push({name:"discountAdd",query:{discountAddId:t.id}})},expMange:function(t){sessionStorage.setItem("expMangeId",t.id),this.$router.push({name:"expMange",query:{expMangeId:t.id}})},productInfo:function(t){sessionStorage.setItem("giftId",t.id),this.$router.push({name:"giftInfo",query:{giftId:t.id}})},productMange:function(t){sessionStorage.setItem("giftProductMangeId",t.id),this.$router.push({name:"giftProductMange",query:{giftProductMangeId:t.id}})},batchOperate:function(t){var e=this;if(0!=this.multipleSelection.length){var a="",n=this.multipleSelection.join(",");a=1==t?i.e:i.f,this.$axios.post(a,{idStr:n}).then(function(t){e.isShowPop=!1,e.$message.success(t.data.msg),e.getList(e.page.currentPage)})}else this.$message.warning("请选择礼包!")}},filters:{formatPrice:function(t){return"￥"+t}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-content"},[t.p.addGiftBag?a("el-button",{staticClass:"add-product",attrs:{type:"primary"},on:{click:t.releaseProduct}},[t._v("添加礼包")]):t._e(),t._v(" "),a("div",{staticClass:"search-pane"},[a("el-form",{ref:"form",attrs:{model:t.form,inline:"","label-width":"100px"}},[a("el-form-item",{attrs:{prop:"name",label:"礼包名称"}},[a("el-input",{attrs:{placeholder:"请输入礼包名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"prodCode",label:"礼包ID"}},[a("el-input",{attrs:{placeholder:"请输入礼包ID"},model:{value:t.form.prodCode,callback:function(e){t.$set(t.form,"prodCode","string"==typeof e?e.trim():e)},expression:"form.prodCode"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"level",label:"可购买层级"}},[a("el-select",{attrs:{placeholder:"请选择用户层级"},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.levelList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getList(1)}}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm("form")}}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{border:"",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"产品名称","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"product-img"},[a("img",{attrs:{src:e.row.imgUrl}})]),t._v(" "),a("p",{staticClass:"product-name"},[t._v(t._s(e.row.name))]),t._v(" "),a("p",{staticClass:"product-id"},[t._v("礼包ID："+t._s(e.row.giftCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品类目",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.categoryName)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"礼包售价",align:"center","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t._f("formatPrice")(void 0==e.row.originalPrice?"0":e.row.originalPrice))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"saleNum",label:"销量",align:"center","min-width":"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"buyer",label:"可购买层级",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.buyer.join(","))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间/发布人",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t._f("formatDate")(e.row.createTime))),a("br"),t._v(t._s("产品编辑:"+(e.row.createAdminName||""))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"状态",align:"center","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?[t._v("待审核")]:2==e.row.status?[t._v("已通过")]:3==e.row.status?[t._v("未通过")]:4==e.row.status?[t._v("已上架")]:5==e.row.status?[t._v("已下架")]:6==e.row.status?[t._v("删除")]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status&&t.p.checkGiftBag?a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"success"},on:{click:function(a){t.giftAudit(e.row,2)}}},[t._v("通过审核")]):t._e(),t._v(" "),1==e.row.status&&t.p.checkGiftBag?a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"danger"},on:{click:function(a){t.giftAudit(e.row,3)}}},[t._v("驳回审核")]):t._e(),t._v(" "),5!=e.row.status&&2!=e.row.status||!t.p.giftBagUpOrDown?t._e():a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"success"},on:{click:function(a){t.giftUporDown(e.row,4)}}},[t._v("礼包上架")]),t._v(" "),4==e.row.status&&t.p.giftBagUpOrDown?a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.giftUporDown(e.row,5)}}},[t._v("礼包下架")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"管理操作",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!=e.row.status&&5!=e.row.status&&2!=e.row.status&&3!=e.row.status||!t.p.updateGiftBag?t._e():a("div",{staticClass:"mange-sty",on:{click:function(a){t.editProduct(e.row)}}},[t._v("编辑礼包")]),t._v(" "),1!=e.row.status&&5!=e.row.status&&2!=e.row.status&&3!=e.row.status||!t.p.queryReferencePrice?t._e():a("div",{staticClass:"mange-sty",on:{click:function(a){t.priceOfInventory(e.row)}}},[t._v("价格库存")]),t._v(" "),1!=e.row.status&&5!=e.row.status&&2!=e.row.status&&3!=e.row.status||!t.p.findProductInfo?t._e():a("div",{staticClass:"mange-sty",on:{click:function(a){t.productMange(e.row)}}},[t._v("礼包管理")]),t._v(" "),1!=e.row.status&&5!=e.row.status&&2!=e.row.status&&3!=e.row.status||!t.p.couponControl?t._e():a("div",{staticClass:"mange-sty",on:{click:function(a){t.inventoryManage(e.row)}}},[t._v("优惠券管理")]),t._v(" "),1!=e.row.status&&5!=e.row.status&&2!=e.row.status&&3!=e.row.status||!t.p.setExperience?t._e():a("div",{staticClass:"mange-sty",on:{click:function(a){t.expMange(e.row)}}},[t._v("经验值管理")]),t._v(" "),1!=e.row.status&&5!=e.row.status&&2!=e.row.status&&3!=e.row.status||!t.p.getGiftBagDetail?t._e():a("div",{staticClass:"mange-sty",on:{click:function(a){t.productInfo(e.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.page.currentPage,layout:"total, prev, pager, next, jumper",total:t.page.totalPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticClass:"operate-table"},[t.p.batchDeleteGiftBag?a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.isShowPop,callback:function(e){t.isShowPop=e},expression:"isShowPop"}},[a("p",[t._v("确定删除吗？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.batchOperate(1)}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.isShowPop=!1}}},[t._v("取消")])],1),t._v(" "),a("el-button",{attrs:{slot:"reference"},on:{click:function(e){t.isShowPop=!0}},slot:"reference"},[t._v("删除")])],1):t._e(),t._v(" "),t.p.giftBagUpOrDown?a("el-button",{on:{click:function(e){t.batchOperate(2)}}},[t._v("下架")]):t._e()],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("lo2y")},null,null).exports,d={components:{vBreadcrumb:n.a,vTabContent:u},data:function(){return{nav:["品牌产品管理","产品礼包设置"],activeName:"allGift"}},methods:{handleClick:function(t){this.activeName=t.name}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gift-list"},[a("v-breadcrumb",{attrs:{nav:t.nav}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"30px 45px",minHeight:"80vh"}}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部礼包产品",name:"allGift"}},["allGift"==t.activeName?a("v-tab-content",{attrs:{name:t.activeName}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"上架产品",name:"upGift"}},["upGift"==t.activeName?a("v-tab-content",{attrs:{name:t.activeName}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"下架产品",name:"downGift"}},["downGift"==t.activeName?a("v-tab-content",{attrs:{name:t.activeName}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"审核产品",name:"auditGift"}},["auditGift"==t.activeName?a("v-tab-content",{attrs:{name:t.activeName}}):t._e()],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,f,!1,function(t){a("9AOG")},null,null);e.default=p.exports},lo2y:function(t,e){}});