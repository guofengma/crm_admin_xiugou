webpackJsonp([45],{"BmF/":function(e,t){},OBet:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={};a.d(s,"queryStoreHouseList",function(){return c}),a.d(s,"addStoreHouse",function(){return u}),a.d(s,"updateStoreHouse",function(){return m}),a.d(s,"updateStoreHouseDeleteById",function(){return h});var o=a("FMx0"),i=a("UU1J"),r=a("tF3a"),d=a("EkIv"),n=a("0xDb"),l=a.n(n),c="/admin/storeHouse/queryStoreHouseList",u="/admin/storeHouse/addStoreHouse",m="/admin/storeHouse/updateStoreHouse",h="/admin/storeHouse/updateStoreHouseDeleteById",p={components:{vBreadcrumb:o.a,icon:i.a,region:r.a,deleteToast:d.a},data:function(){return{p:{addStoreHouse:!1,updateStoreHouse:!1,updateStoreHouseDeleteById:!1},isShowOperate:!1,address:"",form:{contacts:"",telephone:""},addForm:{contacts:"",telephone:""},addMask:!1,editMask:!1,id:"",itemId:"",tableData:[],page:{currentPage:1,totalPage:0},height:"",isShowDelToast:!1,btnLoading:!1,areaDisabled:!0,itype:"",provinceCode:"",cityCode:"",areaCode:""}},created:function(){var e=window.screen.availHeight-520;this.height=e,this.pControl()},activated:function(){this.getList(),this.pControl()},methods:{pControl:function(){for(var e in this.p)this.p[e]=l.a.pc(s[e]);this.p.addStoreHouse&&this.p.updateStoreHouse&&this.p.updateStoreHouseDeleteById&&(this.isShowOperate=!0)},getRegion:function(e){this.address=e,console.log(this.address)},getList:function(){var e=this,t={url:c};e.tableLoading=!0,e.$axios.post("/admin/storeHouse/queryStoreHouseList",t).then(function(t){200==t.data.code?(e.tableLoading=!1,e.tableData=t.data.data):(e.$message.warning(t.data.msg),e.tableLoading=!1)}).catch(function(t){e.tableLoading=!1,console.log(t)})},addAddress:function(){this.addMask=!0,this.addForm.contacts="",this.addForm.telephone="",this.addForm.country="1",this.addForm.address="",this.itype="add",this.areaDisabled=!0},changeArea:function(){"add"==this.itype?this.areaDisabled=1==this.addForm.country:this.areaDisabled=1==this.form.country},editItem:function(e){if(this.editMask=!0,e.country=e.country.toString(),this.form=e,this.itemId=e.id,this.itype="edit",1==e.country){this.areaDisabled=!0;var t=[];t.push(Number(this.form.provinceCode),Number(this.form.cityCode),Number(this.form.areaCode)),this.address=t,console.log(this.address)}else this.areaDisabled=!1,this.address=""},addOrEdit:function(e){var t=this,a="",s={};if(s.contacts=this[e].contacts,s.telephone=this[e].telephone,s.country=this[e].country,s.provinceCode=this.address[0],s.cityCode=this.address[1],s.areaCode=this.address[2],s.address=this[e].address,1!=s.country||this.address[0]&&this.address[1]&&this.address[2])if(s.address)if(s.contacts)if(s.telephone){if(!/^(1[3-8]\d{9}|^\d{3}-?\d{8}|^\d{4}-?\d{7})$/.test(s.telephone))return this.$message.warning("请输入正确的联系方式!"),!1;"add"==this.itype?(a="/admin/storeHouse/addStoreHouse",s.url=u):(a="/admin/storeHouse/updateStoreHouse",s.id=this.itemId,s.url=m),this.btnLoading=!0,this.$axios.post(a,s).then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.btnLoading=!1,t.addMask=!1,t.editMask=!1,t.getList(t.page.currentPage)):(t.btnLoading=!1,t.$message.warning(e.data.msg),t.getList(t.page.currentPage))}).catch(function(e){console.log(e)})}else this.$message.warning("请输入联系方式!");else this.$message.warning("请输入联系人!");else this.$message.warning("请输入详细地址!");else this.$message.warning("请选择省市区!")},delItem:function(e){this.delId=e,this.delUrl="/admin/storeHouse/updateStoreHouseDeleteById",this.delUri=h,this.isShowDelToast=!0},deleteToast:function(e){this.isShowDelToast=e,this.getList()},cancel:function(){this.addMask=!1,this.editMask=!1,this.getList()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"delivery-address"},[a("v-breadcrumb",{attrs:{nav:["运营管理","提货地址设置"]}}),e._v(" "),a("div",{staticClass:"table-block"},[e.p.addStoreHouse?a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.addAddress}},[e._v("添加提货点")]):e._e(),e._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.height,border:""}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"详细地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[[e._v(e._s(t.row.province)+e._s(t.row.city)+e._s(t.row.area)+e._s(t.row.address))]]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contacts",label:"联系人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"telephone",label:"联系方式",align:"center"}}),e._v(" "),e.isShowOperate?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.p.updateStoreHouse?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){e.editItem(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),e.p.updateStoreHouseDeleteById?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.delItem(t.row.id)}}},[e._v("删除")]):e._e()]}}])}):e._e()],1)]],2),e._v(" "),a("el-dialog",{attrs:{title:"添加提货点",visible:e.addMask},on:{"update:visible":function(t){e.addMask=t}}},[a("el-form",{attrs:{"label-width":"100px"},model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[a("el-form-item",{staticClass:" address-area",attrs:{label:"详细地址"}},[a("el-select",{staticClass:"small-inp",on:{change:e.changeArea},model:{value:e.addForm.country,callback:function(t){e.$set(e.addForm,"country",t)},expression:"addForm.country"}},[a("el-option",{attrs:{label:"中国",value:"1"}},[e._v("中国")]),e._v(" "),a("el-option",{attrs:{label:"海外",value:"2"}},[e._v("海外")])],1),e._v(" "),a("div",{staticClass:"address"},[a("region",{attrs:{regionMsg:e.address,isDisabled:!e.areaDisabled},on:{regionMsg:e.getRegion}})],1),e._v(" "),a("el-input",{staticClass:"lar-inp",attrs:{placeholder:"请输入详细地址",size:"medium"},model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address",t)},expression:"addForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入联系人"},model:{value:e.addForm.contacts,callback:function(t){e.$set(e.addForm,"contacts",t)},expression:"addForm.contacts"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入联系方式"},model:{value:e.addForm.telephone,callback:function(t){e.$set(e.addForm,"telephone",t)},expression:"addForm.telephone"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEdit("addForm")}}},[e._v("确 认")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑提货点",visible:e.editMask},on:{"update:visible":function(t){e.editMask=t}}},[a("el-form",{attrs:{"label-width":"100px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("el-form-item",{staticClass:" address-area",attrs:{label:"详细地址"}},[a("el-select",{staticClass:"small-inp",on:{change:e.changeArea},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}},[a("el-option",{attrs:{label:"中国",value:"1"}},[e._v("中国")]),e._v(" "),a("el-option",{attrs:{label:"海外",value:"2"}},[e._v("海外")])],1),e._v(" "),a("div",{staticClass:"address"},[a("region",{attrs:{regionMsg:e.address,isDisabled:!e.areaDisabled},on:{regionMsg:e.getRegion}})],1),e._v(" "),a("el-input",{staticClass:"lar-inp",attrs:{placeholder:"请输入详细地址",size:"medium"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入联系人"},model:{value:e.form.contacts,callback:function(t){e.$set(e.form,"contacts",t)},expression:"form.contacts"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入联系方式"},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEdit("form")}}},[e._v("确 认")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),e.isShowDelToast?a("delete-toast",{attrs:{id:e.delId,url:e.delUrl,uri:e.delUri},on:{msg:e.deleteToast}}):e._e()],1)},staticRenderFns:[]};var g=a("VU/8")(p,f,!1,function(e){a("BmF/")},null,null);t.default=g.exports}});