webpackJsonp([85],{"4YST":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("FMx0"),n=a("P9l9"),i=a("19nM"),o=a("0xDb"),d=a.n(o),s={components:{breadcrumb:r.a},data:function(){return{p:{addDepartment:!1,updateDepartment:!1},isShowOperate:!0,nav:["权限管理","组织结构管理"],isShowDialog:!1,dialogTitle:"",diaForm:{departmentName:"",departmentManger:"",departmentNote:""},formType:"add",departId:"",rules:{departmentName:[{required:!0,message:"请输入部门名称",trigger:"blur"}]},tableData:[{id:123}]}},activated:function(){this.getList(),this.pControl()},methods:{pControl:function(){for(var t in this.p)this.p[t]=d.a.pc(i[t])},getList:function(){var t=this,e={};e.url=i.queryDepartmentList,this.$axios.post(n.queryDepartmentList,e).then(function(e){200==e.data.code?(t.tableData=[],t.tableData=e.data.data):t.$message.warning(e.data.msg)}).catch(function(t){console.log(t)})},operateDepartment:function(t,e){var a=this;this.formType=t,d.a.cleanFormData(this.diaForm),"add"==t?(this.dialogTitle="添加部门",this.isShowDialog=!0):(this.dialogTitle="编辑部门",this.departId=e.id,this.$axios.post(n.findDepartmentById,{id:e.id}).then(function(t){200==t.data.code?(a.diaForm.departmentName=t.data.data.name,a.diaForm.departmentManger=t.data.data.manager,a.diaForm.departmentNote=t.data.data.remark,a.isShowDialog=!0):a.$message.warning(t.data.msg)}).catch(function(t){console.log(t)}))},confirmForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return console.log("error submit!!"),!1;var r={};r.name=e.diaForm.departmentName,r.manager=e.diaForm.departmentManger,r.remarks=e.diaForm.departmentNote;var o="";"add"==e.formType?(o=n.addDepartment,r.url=i.addDepartment):(o=n.updateDepartment,r.url=i.updateDepartment,r.id=e.departId),e.$axios.post(o,r).then(function(a){200==a.data.code?(e.$message.success(a.data.data),e.resetForm(t),e.getList()):e.$message.warning(a.data.msg)}).catch(function(a){e.resetForm(t),console.log(a)})})},resetForm:function(t){this.$refs[t].resetFields(),this.isShowDialog=!1},goToJobMange:function(t){sessionStorage.setItem("jobsPermissionMangeId",t.id),this.$router.push({name:"jobsPermissionMange",params:{id:t.id}})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"organize-mange"},[a("breadcrumb",{attrs:{nav:t.nav}}),t._v(" "),a("el-card",[t.p.addDepartment?a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.operateDepartment("add")}}},[t._v("添加部门")]):t._e(),t._v(" "),a("el-table",{attrs:{border:"",data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"部门编号",align:"center","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"部门名称",align:"center","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"manager",label:"负责人",align:"center","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.p.updateDepartment?a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.operateDepartment("edit",e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(a){t.goToJobMange(e.row)}}},[t._v("岗位管理")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isShowDialog,width:"30%"},on:{"update:visible":function(e){t.isShowDialog=e}}},[a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"diaForm",staticStyle:{width:"300px",margin:"0 auto"},attrs:{model:t.diaForm,rules:t.rules,"label-width":"90px",inline:"","label-position":"right"}},[a("el-form-item",{attrs:{prop:"departmentName",label:"部门名称"}},[a("el-input",{model:{value:t.diaForm.departmentName,callback:function(e){t.$set(t.diaForm,"departmentName",e)},expression:"diaForm.departmentName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"departmentManger",label:"部门负责人"}},[a("el-input",{model:{value:t.diaForm.departmentManger,callback:function(e){t.$set(t.diaForm,"departmentManger",e)},expression:"diaForm.departmentManger"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"departmentNote",label:"备注说明"}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.diaForm.departmentNote,callback:function(e){t.$set(t.diaForm,"departmentNote",e)},expression:"diaForm.departmentNote"}})],1)],1)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.confirmForm("diaForm")}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm("diaForm")}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(s,l,!1,function(t){a("ptzv")},null,null);e.default=m.exports},ptzv:function(t,e){}});