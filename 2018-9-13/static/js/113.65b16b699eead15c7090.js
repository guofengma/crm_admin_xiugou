webpackJsonp([113],{l2uJ:function(t,e){},"qUw+":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("FMx0"),o=i("yPE/"),s=i.n(o),l=i("GVVA"),a={components:{vBreadcrumb:n.a},data:function(){return{nav:["运营管理","帮助中心管理","问题管理","编辑问题"],height:"100vh",questionTypeId:"",questionId:"",form:{questionTitle:"",content:""},editorOption:{placeholder:"请输入内容",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]}},uploadData:{}}},computed:{qnLocation:function(){return"addImg"}},activated:function(){this.height=window.screen.availHeight-400,this.questionTypeId=this.$route.query.questionTypeId||sessionStorage.getItem("questionTypeId"),this.questionId=this.$route.query.questionId||sessionStorage.getItem("questionId"),this.form.questionTitle="",this.form.content="",this.getQuesInfo()},mounted:function(){this.$refs.myQuillEditor.quill.getModule("toolbar").addHandler("image",this.imgHandler)},methods:{onEditorChange:function(t){t.editor;var e=t.html;t.text;this.form.content=e},upScuccess:function(t,e,i){this.fullscreenLoading=!1;var n=this,o="";if("image"===this.uploadType&&(o=t.data.imageUrl),null!=o&&o.length>0){var l=o;n.addRange=n.$refs.myQuillEditor.quill.getSelection(),l=-1!==l.indexOf("http")?l:"http:"+l,n.$refs.myQuillEditor.quill.insertEmbed(null!==n.addRange?n.addRange.index:0,n.uploadType,l,s.a.sources.USER),this.$message.success("插入成功")}else this.$message.error(n.uploadType+"插入失败");this.$refs.upload.clearFiles()},imgHandler:function(t){(this.addRange=this.$refs.myQuillEditor.quill.getSelection(),t)&&document.getElementById("imgInput").click();this.uploadType="image"},getQuesInfo:function(){var t=this,e={id:this.questionId};l.a.findHelpQuestionById(e).then(function(e){t.form.questionTitle=e.data.title||"",t.form.content=e.data.content||""}).catch(function(t){console.log(t)})},submitForm:function(){var t=this,e={};e.title=this.form.questionTitle,e.content=this.form.content,e.typeId=this.questionTypeId,e.id=this.questionId,l.a.updateHelpQuestion(e).then(function(e){t.$router.push("/questionList")}).catch(function(t){console.log(t)})},goBack:function(){sessionStorage.setItem("questionTypeId",this.questionTypeId),this.$router.push({name:"questionList",query:{questionTypeId:this.questionTypeId}})}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-question "},[i("v-breadcrumb",{attrs:{nav:t.nav}}),t._v(" "),i("el-card",{attrs:{"body-style":{padding:"30px 60px"}}},[i("el-form",{attrs:{model:t.form,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"问题标题"}},[i("el-input",{staticClass:"input-sty",attrs:{placeholder:"请输入问题标题"},model:{value:t.form.questionTitle,callback:function(e){t.$set(t.form,"questionTitle",e)},expression:"form.questionTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"通知详情"}},[i("div",{staticStyle:{display:"inline-block",width:"80%"}},[i("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{change:function(e){t.onEditorChange(e)}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),t._v(" "),i("el-upload",{ref:"upload",staticStyle:{display:"none"},attrs:{action:t.qnLocation,data:t.uploadData,"on-success":t.upScuccess}},[i("el-button",{attrs:{size:"small",type:"primary",id:"imgInput","element-loading-text":"插入中,请稍候"}},[t._v("点击上传")])],1)],1)]),t._v(" "),i("el-form-item",{attrs:{label:" "}},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确认保存")]),t._v(" "),i("el-button",{on:{click:t.goBack}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")(a,u,!1,function(t){i("l2uJ")},null,null);e.default=r.exports}});