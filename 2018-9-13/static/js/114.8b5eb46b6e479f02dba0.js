webpackJsonp([114],{"+NU5":function(t,e){},y5sd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("FMx0"),n=i("yPE/"),l=i.n(n),a=i("GVVA"),s={components:{vBreadcrumb:o.a},data:function(){return{nav:["运营管理","帮助中心管理","问题管理","添加问题"],height:"100vh",questionTypeId:"",form:{questionTitle:"",content:""},editorOption:{placeholder:"请输入内容",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]}},uploadData:{}}},computed:{qnLocation:function(){return"addImg"}},activated:function(){this.height=window.screen.availHeight-400,this.questionTypeId=this.$route.query.questionTypeId||sessionStorage.getItem("questionTypeId"),this.form.questionTitle="",this.form.content=""},mounted:function(){this.$refs.myQuillEditor.quill.getModule("toolbar").addHandler("image",this.imgHandler)},methods:{onEditorChange:function(t){t.editor;var e=t.html;t.text;this.form.content=e},upScuccess:function(t,e,i){this.fullscreenLoading=!1;var o=this,n="";if("image"===this.uploadType&&(n=t.data.imageUrl),null!=n&&n.length>0){var a=n;o.addRange=o.$refs.myQuillEditor.quill.getSelection(),a=-1!==a.indexOf("http")?a:"http:"+a,o.$refs.myQuillEditor.quill.insertEmbed(null!==o.addRange?o.addRange.index:0,o.uploadType,a,l.a.sources.USER),this.$message.success("插入成功")}else this.$message.error(o.uploadType+"插入失败");this.$refs.upload.clearFiles()},imgHandler:function(t){(this.addRange=this.$refs.myQuillEditor.quill.getSelection(),t)&&document.getElementById("imgInput").click();this.uploadType="image"},submitForm:function(){var t=this,e={};e.title=this.form.questionTitle,e.content=this.form.content,e.typeId=this.questionTypeId,a.a.addHelpQuestion(e).then(function(e){t.$router.push("/questionList")}).catch(function(t){console.log(t)})},backTolist:function(){this.$router.push("/questionList")}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-question "},[i("v-breadcrumb",{attrs:{nav:t.nav}}),t._v(" "),i("el-card",{attrs:{"body-style":{padding:"30px 60px"}}},[i("el-form",{attrs:{model:t.form,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"问题标题"}},[i("el-input",{staticClass:"input-sty",attrs:{placeholder:"请输入问题标题"},model:{value:t.form.questionTitle,callback:function(e){t.$set(t.form,"questionTitle",e)},expression:"form.questionTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"通知详情"}},[i("div",{staticStyle:{display:"inline-block",width:"80%"}},[i("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{change:function(e){t.onEditorChange(e)}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),t._v(" "),i("el-upload",{ref:"upload",staticStyle:{display:"none"},attrs:{action:t.qnLocation,data:t.uploadData,"on-success":t.upScuccess}},[i("el-button",{attrs:{size:"small",type:"primary",id:"imgInput","element-loading-text":"插入中,请稍候"}},[t._v("点击上传")])],1)],1)]),t._v(" "),i("el-form-item",{attrs:{label:" "}},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确认保存")]),t._v(" "),i("el-button",{on:{click:t.backTolist}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(s,r,!1,function(t){i("+NU5")},null,null);e.default=u.exports}});