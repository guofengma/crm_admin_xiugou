webpackJsonp([128],{DtkK:function(t,e){},Q8yR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("FMx0"),n=a("UU1J"),r=a("tF3a"),s=a("QfvF"),l=a("0xDb"),o=a.n(l),p=a("rSDL"),d=(a("PJh5"),a("xnHa")),u={components:{vBreadcrumb:i.a,icon:n.a,region:r.a},mixins:[d.b],data:function(){return{p:{addSupplier:!1,updateSupplier:!1,updateSupplierDeleteById:!1,findSupplierById:!1},isShowOperate:!0,tableData:[],tableLoading:!1,btnLoading:!1,tipsMask:!1,height:"",formLabelWidth:"100px",form:{name:"",mobile:""},exportForm:{},selected:"",address:[],id:"",info:"",type:"",btnTxt:""}},created:function(){var t=window.screen.availHeight-520;this.height=t,this.pControl()},activated:function(){this.getList(this.page.currentPage),this.pControl()},methods:{pControl:function(){for(var t in this.p)this.p[t]=o.a.pc(p[t]);this.p.updateSupplierDeleteById||this.p.findSupplierById||(this.isShowOperate=!1)},getList:function(t){var e=this,a=e.form;a.page=t;var i=e.address;i&&i[0]?(a.provinceId=i[0],i[1]&&(a.cityId=i[1]),i[2]&&(a.areaId=i[2])):(a.provinceId="",a.cityId="",a.areaId=""),a.url=p.querySupplierPageList,e.tableLoading=!0,e.$axios.post(s.d,a).then(function(t){200==t.data.code?(e.tableLoading=!1,e.tableData=t.data.data.data,e.page.totalPage=t.data.data.resultCount):(e.$message.warning(t.data.msg),e.tableLoading=!1)}).catch(function(t){console.log(t),e.tableLoading=!1})},detailItem:function(t,e){sessionStorage.setItem("supplierDetail",e.id),this.$router.push({path:"/supplierDetail",query:{id:e.id}})},editItem:function(t,e){sessionStorage.setItem("supplierDetail",e.id),this.$router.push({path:"/editSupplier",query:{id:e.id}})},updateStatusItem:function(t,e,a){this.id=e,1==a?(this.info="是否确认停用？",this.type=2,this.btnTxt="确认停用"):(this.info="是否确认启用？",this.type=1,this.btnTxt="确认启用"),this.tipsMask=!0},oprSure:function(){var t=this,e={id:t.id};1==t.type?e.status=1:e.status=2,e.url=p.updateSupplierDeleteById,t.btnLoading=!0,t.$axios.post(s.f,e).then(function(e){t.btnLoading=!1,200==e.data.code?(t.getList(t.page.currentPage),t.tipsMask=!1):(t.$message.warning(e.data.msg),t.tipsMask=!1,t.btnLoading=!1)}).catch(function(e){t.btnLoading=!1,t.tipsMask=!1})},addSupplier:function(){this.$router.push("/addSupplier")},resetForm:function(t){this.address=[],this.$refs[t].resetFields(),this.$refs.exportForm.resetFields(),this.getList(this.page.currentPage)},getRegion:function(t){this.address=t}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"supplier"},[a("v-breadcrumb",{attrs:{nav:["经销商会员管理","供应商管理"]}}),t._v(" "),a("el-card",{staticStyle:{margin:"10px 0 20px"}},[a("el-form",{ref:"form",attrs:{inline:!0,model:t.form}},[a("el-form-item",{attrs:{prop:"name",label:"供应商名称","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入供应商名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"mobile",label:"手机号","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机号"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getList(1)}}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm("form")}}},[t._v("重置")])],1),t._v(" "),t.p.addSupplier?a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:t.addSupplier}},[t._v("添加供应商")]):t._e()],1)],1),t._v(" "),a("div",{staticClass:"table-block"},[a("el-form",{ref:"exportForm",staticClass:"search-area",attrs:{inline:!0,model:t.exportForm}},[a("el-form-item",[a("div",{staticStyle:{display:"inline-block","margin-right":"20px"}},[a("region",{attrs:{regionMsg:t.address},on:{regionMsg:t.getRegion}})],1)])],1),t._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,height:t.height,border:""}},[a("el-table-column",{attrs:{type:"index",label:"供应商编号",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"供应商名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"供应商类型",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.itype?[t._v("产品供应商")]:t._e(),t._v(" "),2==e.row.itype?[t._v("服务供应商")]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"porductNum",label:"供应产品数",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"区域/省市区",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.country?[t._v("海外")]:[t._v("\n                            "+t._s(e.row.province_name)+t._s(e.row.city_name)+t._s(e.row.area_name)+"\n                        ")]]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?[t._v("正常")]:t._e(),t._v(" "),2==e.row.status?[t._v("停用")]:t._e(),t._v(" "),3==e.row.status?[t._v("删除")]:t._e()]}}])}),t._v(" "),t.isShowOperate?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.p.findSupplierById?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.detailItem(e.$index,e.row)}}},[t._v("详情\n                        ")]):t._e(),t._v(" "),2==e.row.status?[t.p.updateSupplier?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.editItem(e.$index,e.row)}}},[t._v("编辑\n                            ")]):t._e()]:[t.p.updateSupplier?a("el-button",{attrs:{type:"primary",disabled:"",size:"small"},on:{click:function(a){t.editItem(e.$index,e.row)}}},[t._v("编辑\n                           ")]):t._e()],t._v(" "),1==e.row.status&&t.p.updateSupplierDeleteById?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.updateStatusItem(e.$index,e.row.id,1)}}},[t._v("停用\n                        ")]):t._e(),t._v(" "),2==e.row.status&&t.p.updateSupplierDeleteById?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.updateStatusItem(e.$index,e.row.id,2)}}},[t._v("启用\n                        ")]):t._e()]}}])}):t._e()],1)],t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.page.currentPage,layout:"total, prev, pager, next, jumper",total:t.page.totalPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2),t._v(" "),t.tipsMask?a("div",{staticClass:"pwd-mask"},[a("div",{staticClass:"box"},[a("div",{staticClass:"mask-title"},[a("icon",{staticClass:"ico",attrs:{ico:"icon-jinggao"}}),t._v("\n                温馨提示\n            ")],1),t._v(" "),a("div",{staticClass:"mask-content"},[a("span",{staticClass:"del-tip"},[t._v(t._s(t.info))]),t._v(" "),a("div",{staticClass:"del-btn-group"},[a("el-button",{staticClass:"del-btn",attrs:{loading:t.btnLoading,type:"danger"},on:{click:function(e){t.oprSure(!0)}}},[t._v(t._s(t.btnTxt)+"\n                    ")]),t._v(" "),a("el-button",{on:{click:function(e){t.tipsMask=!1}}},[t._v("取消")])],1)])])]):t._e()],1)},staticRenderFns:[]};var m=a("VU/8")(u,c,!1,function(t){a("DtkK")},null,null);e.default=m.exports}});