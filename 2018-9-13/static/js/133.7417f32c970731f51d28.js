webpackJsonp([133],{"+unL":function(e,t){},t1jr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("FMx0"),n=a("UU1J"),o=a("tF3a"),i=a("P9l9"),r=a("0xDb"),s=a.n(r),c=a("19nM"),d={components:{vBreadcrumb:l.a,icon:n.a,region:o.a},data:function(){return{p:{stopDealerById:!1,openDealerById:!1,exportDealerListExcel:!1},isShowOperate:!0,tableData:[],tableLoading:!1,btnLoading:!1,tipsMask:!1,page:{currentPage:1,totalPage:20},height:"",formLabelWidth:"100px",form:{id:"",nickName:"",code:"",idCard:"",phone:"",dType:""},exportForm:{levelId:""},selected:"",address:[],levelList:[],id:"",info:"",type:"",btnTxt:""}},created:function(){this.pControl()},activated:function(){this.form.upDealerid=JSON.parse(sessionStorage.getItem("memberId")),this.getList(this.page.currentPage),this.getLevelList(),this.pControl()},methods:{pControl:function(){for(var e in this.p)this.p[e]=s.a.pc(c[e]);this.p.stopDealerById||this.p.openDealerById||(this.isShowOperate=!1)},getList:function(e){var t=this,a=t.form;a.page=e,a.status=2,a.levelId=t.exportForm.levelId;var l=t.address;l&&l[0]&&(a.provinceId=l[0],l[1]&&(a.cityId=l[1]),l[2]&&(a.areaId=l[2])),t.tableLoading=!0,t.$axios.post(i.getDealerPageList,a).then(function(e){200==e.data.code?(t.tableLoading=!1,t.tableData=e.data.data.data,t.page.totalPage=e.data.data.resultCount):(t.$message.warning(e.data.msg),t.tableLoading=!1)}).catch(function(e){console.log(e),t.tableLoading=!1})},getLevelList:function(){var e=this;e.$axios.post(i.getDealerLevelList,{}).then(function(t){200==t.data.code?e.levelList=t.data.data:e.$message.warning(t.data.msg)}).catch(function(e){console.log(e)})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e),this.page.currentPage=e,this.getList(e)},toLower:function(e){this.form.upDealerid=e,this.getList(this.page.currentPage)},detailItem:function(e,t){localStorage.setItem("memberDetail",t.id),this.$router.push({path:"/memberDetail",query:{id:t.id}})},updateStatusItem:function(e,t,a){this.id=t,1==a?(this.info="是否确认关闭？",this.type="关闭",this.btnTxt="确认关闭"):(this.info="是否确认开启？",this.type="开启",this.btnTxt="确认开启"),this.tipsMask=!0},oprSure:function(){var e=this,t={id:e.id},a="";a="关闭"==e.type?i.stopDealerById:i.openDealerById,e.btnLoading=!0,e.$axios.post(a,t).then(function(t){e.btnLoading=!1,200==t.data.code?(e.getList(e.page.currentPage),e.tipsMask=!1):(e.$message.warning(t.data.msg),e.tipsMask=!1,e.btnLoading=!1)}).catch(function(t){e.btnLoading=!1,e.tipsMask=!1})},exportData:function(){var e=this.form;e.page=this.page.currentPage,e.levelId=this.exportForm.levelId;var t=this.address;t&&t[0]?(e.provinceId=t[0],t[1]&&(e.cityId=t[1]),t[2]&&(e.areaId=t[2])):(e.provinceId="",e.cityId="",e.areaId=""),this.$axios.post(i.exportDealerListExcel,e,{responseType:"blob"}).then(function(e){var t=e.data;if(t){var a=window.URL.createObjectURL(new Blob([t])),l=document.createElement("a");l.style.display="none",l.href=a;var n=moment(new Date).format("YYYYMMDDHHmmss");l.setAttribute("download","会员列表"+n+".xlsx"),document.body.appendChild(l),l.click()}}).catch(function(e){console.log(e)})},resetForm:function(e){this.address=[],this.$refs[e].resetFields(),this.$refs.exportForm.resetFields(),this.getList(this.page.currentPage)},getRegion:function(e){this.address=e}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-breadcrumb",{attrs:{nav:["经销商会员管理","会员管理","下级代理"]}}),e._v(" "),a("el-card",{staticStyle:{margin:"10px 0 20px"}},[a("el-form",{ref:"form",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{prop:"id",label:"用户ID","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户ID"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"nickname",label:"用户昵称","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户昵称"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"code",label:"授权码","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入授权码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"idcard",label:"证件号","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入证件号"},model:{value:e.form.idcard,callback:function(t){e.$set(e.form,"idcard",t)},expression:"form.idcard"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone",label:"手机号","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"dType",label:"会员类型","label-width":"120"}},[a("el-select",{attrs:{placeholder:"请选择会员类型"},model:{value:e.form.dType,callback:function(t){e.$set(e.form,"dType",t)},expression:"form.dType"}},[a("el-option",{attrs:{label:"请选择会员类型",value:""}}),e._v(" "),a("el-option",{attrs:{label:"网信经销商",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"供货经销商",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"网红经销商",value:"3"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getList(1)}}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-block"},[a("el-form",{ref:"exportForm",staticClass:"search-area",attrs:{inline:!0,model:e.exportForm}},[a("el-form-item",[a("div",{staticStyle:{display:"inline-block","margin-right":"20px"}},[a("region",{attrs:{regionMsg:e.address},on:{regionMsg:e.getRegion}})],1)]),e._v(" "),a("el-form-item",{attrs:{prop:"levelId",label:"用户层级","label-width":"120"}},[a("el-select",{attrs:{placeholder:"全部层级"},model:{value:e.exportForm.levelId,callback:function(t){e.$set(e.exportForm,"levelId",t)},expression:"exportForm.levelId"}},[a("el-option",{attrs:{label:"全部层级",value:""}}),e._v(" "),e._l(e.levelList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.level}})})],2)],1),e._v(" "),a("el-form-item",[e.p.exportDealerListExcel?a("el-button",{attrs:{type:"primary"},on:{click:e.exportData}},[e._v("导出")]):e._e()],1)],1),e._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"用户昵称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"授权层级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.levelName)+"级")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"day_count",label:"本日登录",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"month_count",label:"本月登录",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"最近登录时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[[e._v(e._s(e._f("formatDate")(t.row.last_logintime)))]]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"CODE",label:"授权码",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addrPreFix",label:"区域/省市区",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"下级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){e.toLower(t.row.id)}}},[e._v(e._s(t.row.sub_level_num))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?[e._v("待激活")]:e._e(),e._v(" "),2==t.row.status?[e._v("正常")]:e._e(),e._v(" "),3==t.row.status?[e._v("已关闭")]:e._e()]}}])}),e._v(" "),e.isShowOperate?a("el-table-column",{attrs:{"min-width":"160",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){e.detailItem(t.$index,t.row)}}},[e._v("详情\n                        ")]),e._v(" "),3!=t.row.status&&e.p.stopDealerById?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.updateStatusItem(t.$index,t.row.id,1)}}},[e._v("关闭\n                        ")]):e._e(),e._v(" "),3==t.row.status&&e.p.openDealerById?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.updateStatusItem(t.$index,t.row.id,2)}}},[e._v("开启\n                        ")]):e._e()]}}])}):e._e()],1)],e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,layout:"total, prev, pager, next, jumper",total:e.page.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2),e._v(" "),e.tipsMask?a("div",{staticClass:"pwd-mask"},[a("div",{staticClass:"box"},[a("div",{staticClass:"mask-title"},[a("icon",{staticClass:"ico",attrs:{ico:"icon-jinggao"}}),e._v("\n                温馨提示\n            ")],1),e._v(" "),a("div",{staticClass:"mask-content"},[a("span",{staticClass:"del-tip"},[e._v(e._s(e.info))]),e._v(" "),a("div",{staticClass:"del-btn-group"},[a("el-button",{staticClass:"del-btn",attrs:{loading:e.btnLoading,type:"danger"},on:{click:function(t){e.oprSure(!0)}}},[e._v(e._s(e.btnTxt)+"\n                    ")]),e._v(" "),a("el-button",{on:{click:function(t){e.tipsMask=!1}}},[e._v("取消")])],1)])])]):e._e()],1)},staticRenderFns:[]};var u=a("VU/8")(d,p,!1,function(e){a("+unL")},null,null);t.default=u.exports}});