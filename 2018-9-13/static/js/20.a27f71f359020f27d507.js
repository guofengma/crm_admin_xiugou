webpackJsonp([20],{"75vq":function(t,e){},UL3V:function(t,e){},dPEb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("FMx0"),n=a("UU1J"),i=a("P9l9"),o=a("19nM"),r={props:["fathermsg"],components:{icon:n.a},data:function(){return{form:{fatherId:"",channel:"",name:"",status:"1"}}},mounted:function(){this.form.channel=this.fathermsg.fatherName,this.form.fatherId=this.fathermsg.id},methods:{closeToask:function(){this.$emit("status",!1)},submitForm:function(t){var e=this;if(""!=this.form.name){var a={};a.fatherid=this.form.fatherId,a.name=this.form.name,a.status=this.form.status,a.url=o.addPermitChannel_2,this.$axios.post(i.addPermitChannel,a).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.closeToask()):e.$message.warning(t.data.msg)}).catch(function(t){console.log(t)})}else this.$message.warning("请输入渠道名称")}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pwd-mask"},[a("div",{staticClass:"box"},[a("div",{staticClass:"mask-title"},[t._v("添加渠道")]),t._v(" "),a("div",{staticClass:"mask-content"},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"渠道名称"}},[a("el-input",{attrs:{placeholder:"请输入渠道名称",size:"medium"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"一级渠道"}},[a("el-input",{attrs:{disabled:"",size:"medium"},model:{value:t.form.channel,callback:function(e){t.$set(t.form,"channel",e)},expression:"form.channel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否启用"}},[a("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{value:"1",label:"是"}}),t._v(" "),a("el-option",{attrs:{value:"2",label:"否"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"submit-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("确认")]),t._v(" "),a("el-button",{on:{click:t.closeToask}},[t._v("取消")])],1)],1)],1)])])},staticRenderFns:[]};var m=a("VU/8")(r,l,!1,function(t){a("uCmy")},"data-v-55ec751b",null).exports,d={props:["row"],components:{icon:n.a},data:function(){return{form:{id:"",channel:"一级渠道",name:"",status:""}}},mounted:function(){this.form.channel=this.row.fatherName,this.form.name=this.row.name,this.form.status=this.row.status.toString(),this.form.id=this.row.id},methods:{closeToask:function(){this.$emit("status",!1)},submitForm:function(t){var e=this;if(""!=this.form.name){var a={};a.id=this.form.id,a.name=this.form.name,a.status=this.form.status,a.url=o.updatePermitChannel_2,this.$axios.post(i.updatePermitChannel,a).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.closeToask()):e.$message.warning(t.data.msg)}).catch(function(t){console.log(t)})}else this.$message.warning("请输入渠道名称")}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pwd-mask"},[a("div",{staticClass:"box"},[a("div",{staticClass:"mask-title"},[t._v("编辑渠道")]),t._v(" "),a("div",{staticClass:"mask-content"},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"渠道名称"}},[a("el-input",{attrs:{placeholder:"请输入渠道名称",size:"medium"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"一级渠道"}},[a("el-input",{attrs:{disabled:"",size:"medium"},model:{value:t.form.channel,callback:function(e){t.$set(t.form,"channel",e)},expression:"form.channel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否启用"}},[a("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{value:"1",label:"是"}}),t._v(" "),a("el-option",{attrs:{value:"2",label:"否"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"submit-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("确认")]),t._v(" "),a("el-button",{on:{click:t.closeToask}},[t._v("取消")])],1)],1)],1)])])},staticRenderFns:[]};var c=a("VU/8")(d,h,!1,function(t){a("75vq")},"data-v-74c82078",null).exports,u=a("EkIv"),f=a("0xDb"),p=a.n(f),v={components:{breadcrumb:s.a,addChannel:m,editChannel:c,deleteToast:u.a},data:function(){return{p:{addPermitChannel_1:!1,addPermitChannel_2:!1,updatePermitChannel_1:!1,updatePermitChannel_2:!1,updatePermitChannel_3:!1},isShowOperate:!0,breadcrumb:["授权审核管理","渠道类目管理",""],isShowAddChan:!1,isShowEditChan:!1,isShowDelToast:!1,tableLoading:!1,row:"",fathermsg:{},delId:66,delUrl:"http://api",delUri:"",tableData:[{ID:123}],id:"",fatherName:"",page:{currentPage:1,totalPage:20},height:""}},created:function(){var t=window.screen.availHeight-360;this.height=t,this.pControl()},activated:function(){this.pControl(),this.breadcrumb[2]=this.$route.params.firstName,this.id=this.$route.params.id||JSON.parse(sessionStorage.getItem("secondChannel")).id,this.fatherName=this.$route.params.fatherName||JSON.parse(sessionStorage.getItem("secondChannel")).fatherName,this.fathermsg.id=this.id,this.fathermsg.fatherName=this.fatherName,this.getList()},methods:{pControl:function(){for(var t in this.p)this.p[t]=p.a.pc(o[t]);this.p.updatePermitChannel_2||this.p.updatePermitChannel_2||(this.isShowOperate=!1)},getList:function(){var t=this,e=this,a={fatherid:this.id,url:o.addPermitChannel_2};this.tableLoading=!0,this.$axios.post(i.permitChannelGetList,a).then(function(e){t.tableLoading=!1,200==e.data.code?(t.tableData=[],t.tableData=e.data.data):t.$message.warning(e.data.msg)}).catch(function(t){console.log(t),e.tableLoading=!1})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){console.log("当前页: "+t),this.page.currentPage=t,this.getList(t)},edit:function(t){this.row=t,this.row.fatherName=this.fathermsg.fatherName,this.isShowEditChan=!0},deleteMsg:function(t){this.delId=t.id,this.delUrl=i.updatePermitChannel,this.delUri=o.updatePermitChannel_3,this.isShowDelToast=!0},addChan:function(){this.isShowAddChan=!0},closeAddChan:function(t){this.getList(),this.isShowAddChan=t},closeEditChan:function(t){this.getList(),this.isShowEditChan=t},deleteToast:function(t){this.getList(),this.isShowDelToast=t}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("breadcrumb",{attrs:{nav:t.breadcrumb}}),t._v(" "),a("el-card",[t.p.addPermitChannel_2?a("el-button",{attrs:{type:"primary"},on:{click:t.addChan}},[t._v("添加渠道")]):t._e(),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"w-table",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableData,height:t.height,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"品类",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"渠道参与者",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?[t._v("开启")]:t._e(),t._v(" "),2==e.row.status?[t._v("关闭")]:t._e(),t._v(" "),3==e.row.status?[t._v("删除")]:t._e()]}}])}),t._v(" "),t.isShowOperate?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.p.updatePermitChannel_2?a("el-button",{attrs:{type:"warning"},on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),2==e.row.status&&t.p.updatePermitChannel_3?a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.deleteMsg(e.row)}}},[t._v("删除")]):t._e()]}}])}):t._e()],1)],1),t._v(" "),t.isShowAddChan?a("add-channel",{attrs:{fathermsg:t.fathermsg},on:{status:t.closeAddChan}}):t._e(),t._v(" "),t.isShowEditChan?a("edit-channel",{attrs:{row:t.row},on:{status:t.closeEditChan}}):t._e(),t._v(" "),t.isShowDelToast?a("delete-toast",{attrs:{id:t.delId,url:t.delUrl,uri:t.delUri,status:"3"},on:{msg:t.deleteToast}}):t._e()],1)},staticRenderFns:[]};var g=a("VU/8")(v,b,!1,function(t){a("UL3V")},"data-v-4645723a",null);e.default=g.exports},uCmy:function(t,e){}});