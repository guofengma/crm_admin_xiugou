webpackJsonp([86],{aqY7:function(e,t){},yo2d:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("FMx0"),o=a("P9l9"),s=a("EkIv"),r=a("19nM"),i=a("xnHa"),l=a("GVVA"),d={components:{breadcrumb:n.a,deleteToast:s.a},mixins:[i.b],data:function(){return{nav:["权限管理","管理员账号管理"],isShowResetPwd:!1,isShowDelToast:!1,closeBtn:!1,delId:-1,delUrl:"api",delUri:"",form:{name:"",phone:""},pwdForm:{id:"",phone:"",password:""},tableLoading:!1,tableData:[],height:"",rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){var e=window.screen.availHeight-500;this.height=e},activated:function(){this.getList(this.page.currentPage)},methods:{getList:function(e){var t=this,a={};a.page=e,a.name=this.form.name,a.phone=this.form.phone,a.url=r.manageList,this.tableLoading=!0,l.a.getMangerList(a).then(function(e){t.tableData=[],e.data.data.forEach(function(e,a){e.visible=!1,t.tableData.push(e)}),t.page.totalPage=e.data.totalNum,t.page.currentPage=e.data.currentPage,t.tableLoading=!1}).catch(function(e){console.log(e),t.tableLoading=!1})},resetForm:function(e){this.$refs[e].resetFields()},addManger:function(){this.$router.push("/addManger")},editManger:function(e){sessionStorage.setItem("editManger",e.id),this.$router.push({name:"editManger",query:{id:e.id}})},showLog:function(e){sessionStorage.setItem("showMangeLogTmp",e.id),this.$router.push({name:"showMangeLog",params:{userId:e.id}})},resetPwd:function(e){this.pwdForm={},this.pwdForm.id=e.id,this.pwdForm.url=r.resetPassword,this.isShowResetPwd=!0},confirmReset:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$axios.post(o.resetPassword,t.pwdForm).then(function(e){200==e.data.code?(t.$message.success(e.data.data),t.isShowResetPwd=!1):t.$message.warning(e.data.msg)}).catch(function(e){console.log(e)})})},deleteUser:function(e){this.delId=e.id,this.delUrl=o.deleteAdminUser,this.delUri=r.deleteAdminUser,this.isShowDelToast=!0},deleteToast:function(e){this.isShowDelToast=e,this.getList(this.page.currentPage)},accountMange:function(e,t){var a=this,n={};n.id=e.id,n.status=t,n.url=r.updateAdminUserStatus,this.closeBtn=!0,this.$axios.post(o.updateAdminUserStatus,n).then(function(n){a.closeBtn=!1,200==n.data.code?(a.$message.success(n.data.data),e.status=t,e.visible=!1):a.$message.warning(n.data.msg)}).catch(function(e){a.closeBtn=!1,console.log(e)})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("breadcrumb",{attrs:{nav:e.nav}}),e._v(" "),a("el-card",[a("el-form",{ref:"form",attrs:{model:e.form,inline:"","label-width":"100px"}},[a("el-form-item",{attrs:{prop:"name",label:"管理员姓名"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone",label:"手机号"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"==typeof t?t.trim():t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getList(1)}}},[e._v("搜索")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-card",{staticClass:"con-card"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addManger}},[e._v("新建管理员")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"w-table",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData,height:e.height,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"管理员姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"telephone",label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptmentName",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jobName",label:"岗位",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?[e._v("关闭")]:1==t.row.status?[e._v("正常")]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"400",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.editManger(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,layout:"total, prev, pager, next, jumper",total:e.page.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.isShowResetPwd,width:"20%"},on:{"update:visible":function(t){e.isShowResetPwd=t}}},[a("el-form",{ref:"pwdForm",attrs:{rules:e.rules,model:e.pwdForm,inline:"","label-width":"100px"}},[a("el-form-item",{attrs:{prop:"password",label:"密码重置"}},[a("el-input",{model:{value:e.pwdForm.password,callback:function(t){e.$set(e.pwdForm,"password","string"==typeof t?t.trim():t)},expression:"pwdForm.password"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirmReset("pwdForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.isShowResetPwd=!1}}},[e._v("取 消")])],1)],1),e._v(" "),e.isShowDelToast?a("delete-toast",{attrs:{id:e.delId,url:e.delUrl,uri:e.delUri},on:{msg:e.deleteToast}}):e._e()],1)},staticRenderFns:[]};var u=a("VU/8")(d,c,!1,function(e){a("aqY7")},null,null);t.default=u.exports}});