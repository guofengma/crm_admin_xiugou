webpackJsonp([54],{qO9J:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("FMx0"),a=n("EkIv"),o=n("m6zT"),l=(n("0xDb"),n("GVVA")),r=n("xnHa"),s={components:{vBreadcrumb:i.a,deleteToast:a.a},mixins:[r.b],data:function(){return{nav:["拼店店铺管理","店铺公告管理"],isShowEdit:!1,isShowDelToast:!1,tableData:[],annContent:"",delId:0,delUrl:"http://api",delUri:"",recruitShopId:"",id:""}},activated:function(){this.recruitShopId=this.$route.query.recruitShopId||sessionStorage.getItem("recruitShopId"),this.getList()},methods:{getList:function(){var t=this,e={storeId:this.recruitShopId};l.a.queryStoreNoticeList(e).then(function(e){t.tableData=[],t.tableData=e.data}).catch(function(t){console.log(t)})},editAnnoun:function(t){this.annContent=t.content,this.isShowEdit=!0,this.id=t.id},confirmEdit:function(){var t=this;if(""!=this.annContent){this.isShowEdit=!1;var e={id:this.id,content:this.annContent};l.a.updateStoreNotice(e).then(function(e){t.getList(t.page.currentPage)}).catch(function(t){console.log(t)})}else this.$message.warning("请输入公告内容")},delItem:function(t){this.delId=t.id,this.delUrl="deleteStoreNotice",this.delUri=o.a,this.isShowDelToast=!0},deleteToast:function(t){this.isShowDelToast=t,this.getList(this.page.currentPage)},handleIndex:function(t){return t+1}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shop-announcement"},[n("v-breadcrumb",{attrs:{nav:t.nav}}),t._v(" "),n("el-card",{attrs:{"body-style":{padding:"20px 60px"}}},[n("el-table",{attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{type:"index",index:t.handleIndex,label:"编号",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"内容",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"发布时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.createTime?[[t._v(t._s(t._f("formatDate")(e.row.createTime)))]]:void 0}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"发布人",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){t.editAnnoun(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(n){t.delItem(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"店铺公告修改",visible:t.isShowEdit,width:"30%"},on:{"update:visible":function(e){t.isShowEdit=e}}},[n("el-input",{attrs:{type:"textarea",rows:10,placeholder:""},model:{value:t.annContent,callback:function(e){t.annContent=e},expression:"annContent"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.confirmEdit}},[t._v("修 改")]),t._v(" "),n("el-button",{on:{click:function(e){t.isShowEdit=!1}}},[t._v("取 消")])],1)],1),t._v(" "),t.isShowDelToast?n("delete-toast",{attrs:{id:t.delId,url:t.delUrl,uri:t.delUri},on:{msg:t.deleteToast}}):t._e()],1)},staticRenderFns:[]};var d=n("VU/8")(s,c,!1,function(t){n("uEHK")},null,null);e.default=d.exports},uEHK:function(t,e){}});