webpackJsonp([77],{CGx4:function(t,e){},qqVG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),s=a("woOf"),d=a.n(s),l=a("exGp"),c=a.n(l),r=a("FMx0"),o=a("UU1J"),v=(a("PJh5"),a("0xDb"),a("19nM"),a("xnHa")),_=a("GVVA"),u={components:{vBreadcrumb:r.a,icon:o.a},mixins:[v.c],data:function(){return{typeList:[],dValue:"",list:[],detail:{},id:"",loading:!1,btnLoading:!1,username:"",userId:"",item:{type_key:"1"},typeKey:"",replyContent:""}},activated:function(){this.id=this.$route.query.id||JSON.parse(sessionStorage.getItem("feedDetail").id),this.getDetail(),this.username=localStorage.getItem("ms_username"),this.userId=localStorage.getItem("ms_userID")},methods:{getDetail:function(){var t=this;return c()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,t.queryDictonary(5);case 3:a.typeList=a.tmpAxiosData,i={id:a.id},a.loading=!0,_.a.findFeedbackById(i).then(function(t){var e=t.data.data.detail_record[0];for(var i in e.checked=!0,e.type_key=e.type_key.toString(),a.detail=d()(e),t.data.data.history_record){var n=t.data.data.history_record[i];n.type_key=n.type_key.toString(),n.checked=!1,n.dValue=a.typeList[n.type_key]}a.list=t.data.data.history_record,a.loading=!1}).catch(function(t){a.loading=!1});case 7:case"end":return e.stop()}},e,t)}))()},expandItem:function(t){this.id=t.id,this.getDetail()},cancel:function(){this.$router.push("/feedBack")},update:function(t){var e=this,a={id:e.id};if("reply"==t){if(a.replyContent=e.detail.reply_content,!a.replyContent)return void e.$message.warning("请输入回复内容!")}else a.typeKey=e.detail.type_key;e.btnLoading=!0,_.a.updateFeedback(a).then(function(t){e.btnLoading=!1,e.$router.push("/feedBack")}).catch(function(t){e.btnLoading=!1})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-breadcrumb",{attrs:{nav:["服务管理","问题反馈","问题详情"]}}),t._v(" "),a("div",{staticClass:"container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"feed-area"},[a("div",{staticClass:"detail-area"},[a("div",{staticClass:"detail-item"},[t._v("\n                    反馈人："+t._s(t.detail.nickname)+"\n                ")]),t._v(" "),a("div",{staticClass:"detail-item"},[t._v("\n                    联系电话："+t._s(t.detail.phone)+"\n                ")]),t._v(" "),a("div",{staticClass:"detail-item"},[t._v("\n                    用户层级："+t._s(t.detail.remark)+"\n                ")]),t._v(" "),a("div",{staticClass:"detail-item"},[t._v("\n                    所在区域："+t._s(t.detail.address)+"\n                ")]),t._v(" "),a("div",{staticClass:"detail-item"},[t._v("\n                    反馈问题类型：\n                    "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.detail.type_key,callback:function(e){t.$set(t.detail,"type_key",e)},expression:"detail.type_key"}},t._l(t.typeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.dValue,value:t.dKey}})}))],1),t._v(" "),a("div",{staticClass:"detail-title"},[t._v("问题描述：")]),t._v(" "),a("div",[a("el-input",{attrs:{type:"textarea",disabled:""},model:{value:t.detail.content,callback:function(e){t.$set(t.detail,"content",e)},expression:"detail.content"}})],1),t._v(" "),a("div",{staticClass:"detail-title"},[t._v("图片：")]),t._v(" "),a("div",[t.detail.original_img?a("img",{attrs:{src:t.detail.original_img,alt:""}}):t._e()]),t._v(" "),a("div",{staticClass:"detail-title"},[t._v("回复：")]),t._v(" "),a("div",[a("el-input",{attrs:{type:"textarea"},model:{value:t.detail.reply_content,callback:function(e){t.$set(t.detail,"reply_content",e)},expression:"detail.reply_content"}})],1),t._v(" "),a("div",{staticClass:"detail-item"},[t._v("\n                    处理人："+t._s(t.username)+"\n                ")]),t._v(" "),1==t.detail.status?a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.btnLoading,expression:"btnLoading"}],attrs:{type:"primary"},on:{click:function(e){t.update("reply")}}},[t._v("确认回复")]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.btnLoading,expression:"btnLoading"}],attrs:{type:"success"},on:{click:function(e){t.update("update")}}},[t._v("修改问题类型")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1):t._e()]),t._v(" "),t._l(t.list,function(e,i){return a("div",{key:i},[a("div",{staticClass:"feed-item",on:{click:function(a){t.expandItem(e)}}},[a("div",{staticClass:"item",staticStyle:{width:"15%"}},[t._v("反馈人："+t._s(e.nickname))]),t._v(" "),a("div",{staticClass:"item",staticStyle:{width:"18%"}},[t._v("反馈问题类型：\n                    "),[[t._v(t._s(e.dValue))]]],2),t._v(" "),a("div",{staticClass:"item",staticStyle:{width:"20%"}},[t._v("反馈时间："+t._s(t._f("formatDate")(e.create_time)))]),t._v(" "),a("div",{staticClass:"item",staticStyle:{width:"10%"}},[t._v("状态：\n                        "),[1==e.status?[t._v("待处理")]:t._e(),t._v(" "),2==e.status?[t._v("已处理")]:t._e()]],2),t._v(" "),a("div",{staticClass:"item",staticStyle:{width:"20%"}},[t._v("处理时间："+t._s(t._f("formatDate")(e.reply_time)))]),t._v(" "),a("div",{staticClass:"item",staticStyle:{width:"10%"}},[t._v("处理人员："+t._s(e.adminName))]),t._v(" "),a("div",{staticClass:"item",staticStyle:{width:"4%"}},[a("i",{class:e.checked?"el-icon-caret-bottom":"el-icon-caret-top"})])])])})],2)])],1)},staticRenderFns:[]};var y=a("VU/8")(u,p,!1,function(t){a("CGx4")},null,null);e.default=y.exports}});