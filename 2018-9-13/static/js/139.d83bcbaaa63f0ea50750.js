webpackJsonp([139],{M5hn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("FMx0"),s=a("UU1J"),r=a("P9l9"),n=a("PJh5"),l=a.n(n),i=a("0xDb"),c=a.n(i),d=a("19nM"),m=a("xnHa"),p={components:{vBreadcrumb:o.a,icon:s.a},mixins:[m.b],data:function(){return{p:{addRechargeRecord:!1,updateRechargeRecord:!1},tableData:[],height:"",tipsMask:!1,info:"",formLabelWidth:"100px",form:{status:"",nickname:"",date:""},id:"",btnLoading:!1,addMask:!1,addForm:{phone:"",money:"",type:"1",remark:""},showDetail:!1,detail:{},dealerId:"",opr:{id:"",status:""}}},created:function(){var e=window.screen.availHeight-520;this.height=e,this.pControl()},activated:function(){this.getList(this.page.currentPage),this.pControl()},methods:{pControl:function(){for(var e in this.p)this.p[e]=c.a.pc(d[e])},getList:function(e){var t=this,a={page:e,nickname:t.form.nickname,phone:t.form.phone,status:t.form.status,startTime:t.form.date?l()(t.form.date[0]).format("YYYY-MM-DD"):"",endTime:t.form.date?l()(t.form.date[1]).format("YYYY-MM-DD"):""};a.url=d.queryRechargeRecordPageList,t.tableLoading=!0,t.$axios.post(r.queryRechargeRecordPageList,a).then(function(e){200==e.data.code?(t.tableLoading=!1,t.tableData=e.data.data.data,t.page.totalPage=e.data.data.resultCount):(t.$message.warning(e.data.msg),t.tableLoading=!1)}).catch(function(e){t.tableLoading=!1,console.log(e)})},recharge:function(){this.addMask=!0,this.addForm.phone="",this.addForm.money="",this.addForm.type="1",this.addForm.remark="",this.showDetail=!1},findMember:function(){var e=this,t=this;if(/^1[3-8]\d{9}$/.test(t.addForm.phone)){var a={phone:t.addForm.phone};t.$axios.post(r.findDealerByPhone,a).then(function(a){200==a.data.code?(t.showDetail=!0,t.detail=a.data.data,t.dealerId=a.data.data.id):e.$message.warning(a.data.msg)}).catch(function(e){console.log(e)})}else t.$message.warning("请输入正确的手机号!")},addRechargeRecord:function(e){var t=this,a={};a.type=this[e].type,a.money=this[e].money,a.dealerId=this.dealerId,a.dealerId?a.type?a.money?(a.remark=this[e].remark,a.url=d.addRechargeRecord,this.$axios.post(r.addRechargeRecord,a).then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.addMask=!1,t.getList(t.page.currentPage)):t.$message.warning(e.data.msg)}).catch(function(e){console.log(e)})):this.$message.warning("请输入充值金额!"):this.$message.warning("请选择充值账户类型!"):this.$message.warning("请输入用户手机号!")},cancel:function(){this.addMask=!1,this.getList(this.page.currentPage)},updateStatus:function(e,t){this.tipsMask=!0,this.info=1==e?"确定通过？":"确定驳回？",this.opr.id=t.id,this.opr.status=e},oprSure:function(){var e=this,t=this.opr;t.url=d.updateRechargeRecord,this.$axios.post(r.updateRechargeRecord,t).then(function(t){200==t.data.code?(e.$message.success(t.data.msg),e.tipsMask=!1,e.getList(e.page.currentPage)):e.$message.warning(t.data.msg)}).catch(function(e){console.log(e)})},resetForm:function(e){this.$refs[e].resetFields(),this.form.date="",this.getList(this.page.currentPage)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-recharge"},[a("v-breadcrumb",{attrs:{nav:["经销商会员管理","账户充值"]}}),e._v(" "),a("transition",{attrs:{name:"move",appear:""}},[a("el-card",{staticStyle:{margin:"10px 0 20px"}},[a("el-form",{ref:"form",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{prop:"nickname",label:"会员昵称","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入会员昵称"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone",label:"手机号","label-width":"120"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"status",label:"状态","label-width":"120"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"全部记录",value:""}}),e._v(" "),a("el-option",{attrs:{label:"待审核",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"已同意",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"驳回",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"date",label:"时间","label-width":"120"}},[a("el-date-picker",{attrs:{type:"datetimerange",format:"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getList(1)}}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"table-block"},[e.p.addRechargeRecord?a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.recharge}},[e._v("账户充值")]):e._e(),e._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.height,border:""}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"会员昵称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"账户类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.accountType?[e._v("现金余额账户")]:e._e(),e._v(" "),2==t.row.accountType?[e._v("代币账户")]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rechargeBalance",label:"充值金额",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"充值时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.createTime?[[e._v(e._s(e._f("formatDate")(t.row.createTime)))]]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?[e._v("待审核")]:e._e(),e._v(" "),1==t.row.status?[e._v("已同意")]:e._e(),e._v(" "),2==t.row.status?[e._v("驳回")]:e._e()]}}])}),e._v(" "),e.p.updateRechargeRecord?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return 0==t.row.status?[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.updateStatus(1,t.row)}}},[e._v("通过\n                        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.updateStatus(2,t.row)}}},[e._v("驳回\n                        ")])]:void 0}}])}):e._e()],1)],e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,layout:"total, prev, pager, next, jumper",total:e.page.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2),e._v(" "),e.tipsMask?a("div",{staticClass:"pwd-mask"},[a("div",{staticClass:"box"},[a("div",{staticClass:"mask-title"},[a("icon",{staticClass:"ico",attrs:{ico:"icon-jinggao"}}),e._v("\n                温馨提示\n            ")],1),e._v(" "),a("div",{staticClass:"mask-content"},[a("span",{staticClass:"del-tip"},[e._v(e._s(e.info))]),e._v(" "),a("div",{staticClass:"del-btn-group"},[a("el-button",{staticClass:"del-btn",attrs:{loading:e.btnLoading,type:"danger"},on:{click:function(t){e.oprSure(!0)}}},[e._v("确认\n                    ")]),e._v(" "),a("el-button",{on:{click:function(t){e.tipsMask=!1}}},[e._v("取消")])],1)])])]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"账户充值",visible:e.addMask},on:{"update:visible":function(t){e.addMask=t}}},[a("el-form",{attrs:{"label-width":e.formLabelWidth},model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[a("el-form-item",{attrs:{prop:"name",label:"手机号"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入用户手机号查找"},on:{blur:e.findMember},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),e._v(" "),e.showDetail?a("div",{staticClass:"detail"},[a("div",{staticClass:"member-item"},[a("span",{staticClass:"member-title"},[e._v("会员编号：")]),a("span",[e._v(e._s(e.detail.code))])]),e._v(" "),a("div",{staticClass:"member-item"},[a("span",{staticClass:"member-title"},[e._v("昵称：")]),a("span",[e._v(e._s(e.detail.nickname))])]),e._v(" "),a("div",{staticClass:"member-item"},[a("span",{staticClass:"member-title"},[e._v("手机号：")]),a("span",[e._v(e._s(e.detail.phone))])]),e._v(" "),a("div",{staticClass:"member-item"},[a("span",{staticClass:"member-title"},[e._v("姓名：")]),a("span",[e._v(e._s(e.detail.realname))])]),e._v(" "),a("div",{staticClass:"member-item"},[a("span",{staticClass:"member-title"},[e._v("身份证号：")]),a("span",[e._v(e._s(e.detail.idcard))])])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"充值账户类型"}},[a("el-select",{attrs:{placeholder:"请选择账户类型"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},[a("el-option",{attrs:{value:"1",label:"现金余额账户"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"代币账户"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"money",label:"充值金额"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入充值金额"},model:{value:e.addForm.money,callback:function(t){e.$set(e.addForm,"money",t)},expression:"addForm.money"}})],1),e._v(" "),a("el-form-item",{staticClass:"remark-area",attrs:{label:"备注说明"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off",placeholder:"请输入备注说明"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.btnLoading,expression:"btnLoading"}],attrs:{type:"primary"},on:{click:function(t){e.addRechargeRecord("addForm")}}},[e._v("确定保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(p,u,!1,function(e){a("e4TH")},null,null);t.default=h.exports},e4TH:function(e,t){}});