webpackJsonp([27],{UTU1:function(t,e){},VSkY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("FMx0"),o=a("Xxa5"),n=a.n(o),i=a("exGp"),s=a.n(i),l=a("0xDb"),c=a.n(l),d=a("Te9O"),u=a("6MZE"),p=a("PJh5"),m=a.n(p),f=a("xnHa"),b={props:["tableData"],mixins:[f.c],components:{},watch:{tableData:{handler:function(t){this.table=t},deep:!0}},data:function(){return{p:{auditWithdrawMoney:!1,queryWithdrawMoneyById:!1,queryRefusalReason:!1},table:[],replayList:[],id:"",title:"",status:"",auditUrl:"",name:"",reason:"",fastReplay:"",isShowAuditDia:!1,isShowRecord:!1,recordForm:{no:"",rePeople:"",money:"",beginTime:"",blank:"",card:"",operatePeople:"",confirmTime:""},btnloading:!1,isShowRefuseReason:!1,refuseReason:"",refReaBtnLoading:!1}},created:function(){this.table=this.tableData,this.pControl()},methods:{pControl:function(){for(var t in this.p)this.p[t]=c.a.pc(u[t])},accountMsg:function(){this.$router.push("tradeInfo")},audit:function(t,e){var a=this;return s()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a.id=t.id,a.status=e,a.name=t.realname,a.reason="",a.fastReplay="",1!=e){r.next=10;break}a.title="提现申请确认",a.auditUrl=d.agreeToWithdrawMoney,r.next=15;break;case 10:return a.title="确认驳回"+a.name+"的提现申请?请填写理由",a.auditUrl=d.rejectWithdrawMoney,r.next=14,a.queryDictonary(10);case 14:a.replayList=a.tmpAxiosData;case 15:a.isShowAuditDia=!0;case 16:case"end":return r.stop()}},r,a)}))()},confirmAudit:function(){var t=this,e={};e.id=this.id,e.status=this.status,e.url=u.auditWithdrawMoney,2!=this.status||(e.reason=this.reason,""!=e.reason)?this.$axios.post(this.auditUrl,e).then(function(e){t.$message.success(e.data.data.msg),t.$emit("updataData",!0),t.isShowAuditDia=!1}):this.$message.warning("请填写拒绝理由!")},selectFastRep:function(t){this.reason=t},record:function(t){var e=this;this.btnloading=!0,this.$axios.post(d.queryWithdrawMoneyById,{id:t.id,url:u.queryWithdrawMoneyById}).then(function(t){e.btnloading=!1,e.recordForm.no=t.data.data.data.withdraw_num,e.recordForm.rePeople=t.data.data.data.realname,e.recordForm.money=t.data.data.data.withdraw_balance,e.recordForm.beginTime=null==t.data.data.data.create_time?"":m()(t.data.data.data.create_time).format("YYYY/MM/DD HH:mm"),e.recordForm.blank=t.data.data.data.bank_name,e.recordForm.card=t.data.data.data.card_no,e.recordForm.operatePeople=t.data.data.data.adminName,e.recordForm.confirmTime=null==t.data.data.data.update_time?"":m()(t.data.data.data.update_time).format("YYYY/MM/DD HH:mm"),e.isShowRecord=!0})},showRefuseReason:function(t){var e=this;this.refReaBtnLoading=!0,this.$axios.post(d.queryRefusalReason,{id:t.id,url:u.queryRefusalReason}).then(function(t){e.refuseReason=t.data.data,e.isShowRefuseReason=!0,e.refReaBtnLoading=!1})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"withdrawal-tab"},[a("el-table",{attrs:{data:t.table,border:""}},[a("el-table-column",{attrs:{prop:"withdraw_num",label:"提现编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"realname",label:"申请人",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"withdraw_balance",label:"申请提现金额",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"red"}},[t._v(t._s(t._f("handleMoney")(e.row.withdraw_balance)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"发起时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.create_time?[t._v("\n                "+t._s(t._f("formatDate")(e.row.create_time))+"\n            ")]:void 0}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bank_name",label:"银行",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"card_no",label:"提现卡号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?[t._v("待确认")]:1==e.row.status?[t._v("已确认")]:2==e.row.status?[t._v("驳回")]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.accountMsg(e.row)}}},[t._v("账户明细")]),t._v(" "),0==e.row.status&&t.p.auditWithdrawMoney?a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.audit(e.row,1)}}},[t._v("确认")]):t._e(),t._v(" "),0==e.row.status&&t.p.auditWithdrawMoney?a("el-button",{attrs:{type:"warning"},on:{click:function(a){t.audit(e.row,2)}}},[t._v("驳回")]):t._e(),t._v(" "),1==e.row.status&&t.p.queryWithdrawMoneyById?a("el-button",{attrs:{loading:t.btnloading,type:"warning"},on:{click:function(a){t.record(e.row)}}},[t._v("打款记录")]):t._e(),t._v(" "),2==e.row.status&&t.p.queryRefusalReason?a("el-button",{attrs:{loading:t.refReaBtnLoading,type:"danger"},on:{click:function(a){t.showRefuseReason(e.row)}}},[t._v("查看驳回理由")]):t._e()]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.isShowAuditDia,center:"",width:"30%"},on:{"update:visible":function(e){t.isShowAuditDia=e}}},[1==t.status?a("p",{staticStyle:{"text-align":"center","font-size":"18px"}},[t._v("确认("+t._s(t.name)+")的提现申请?")]):t._e(),t._v(" "),2==t.status?a("el-input",{attrs:{rows:"10",type:"textarea",placeholder:"请填写驳回理由"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}):t._e(),t._v(" "),2==t.status?a("el-select",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"请选择快捷回复"},on:{change:t.selectFastRep},model:{value:t.fastReplay,callback:function(e){t.fastReplay=e},expression:"fastReplay"}},t._l(t.replayList,function(t,e){return a("el-option",{key:e,attrs:{label:t.dValue,value:t.dValue}})})):t._e(),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmAudit}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.isShowAuditDia=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"查看打款记录",visible:t.isShowRecord,center:"",width:"30%"},on:{"update:visible":function(e){t.isShowRecord=e}}},[a("el-form",{attrs:{model:t.recordForm,"label-width":"130px"}},[a("el-form-item",{attrs:{prop:"no",label:"提现编号:"}},[t._v(t._s(t.recordForm.no))]),t._v(" "),a("el-form-item",{attrs:{prop:"rePeople",label:"申请人:"}},[t._v(t._s(t.recordForm.rePeople))]),t._v(" "),a("el-form-item",{attrs:{prop:"money",label:"申请提现金额:"}},[a("span",{staticStyle:{color:"red"}},[t._v(t._s(t._f("handleMoney")(t.recordForm.money)))])]),t._v(" "),a("el-form-item",{attrs:{prop:"beginTime",label:"发起时间:"}},[t._v(t._s(t.recordForm.beginTime))]),t._v(" "),a("el-form-item",{attrs:{prop:"blank",label:"银行:"}},[t._v(t._s(t.recordForm.blank))]),t._v(" "),a("el-form-item",{attrs:{prop:"card",label:"提现卡号:"}},[t._v(t._s(t.recordForm.card))]),t._v(" "),a("el-form-item",{attrs:{prop:"operatePeople",label:"操作人:"}},[t._v(t._s(t.recordForm.operatePeople))]),t._v(" "),a("el-form-item",{attrs:{prop:"confirmTime",label:"确认时间:"}},[t._v(t._s(t.recordForm.confirmTime))])],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.isShowRecord=!1}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.isShowRecord=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"驳回理由",visible:t.isShowRefuseReason,center:"",width:"30%"},on:{"update:visible":function(e){t.isShowRefuseReason=e}}},[a("p",{staticStyle:{"text-align":"center","font-size":"16px"}},[t._v(t._s(t.refuseReason))]),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.isShowRefuseReason=!1}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.isShowRefuseReason=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var _=a("VU/8")(b,h,!1,function(t){a("UTU1")},"data-v-58914a8c",null).exports,v={components:{vBreadcrumb:r.a,vTab:_},mixins:[f.b,f.c],data:function(){return{activeName:"1",form:{applyPeople:"",withdraNo:"",time:[]},tableData:[]}},activated:function(){this.getList(this.page.currentPage)},methods:{handleClick:function(t){this.activeName=t.name,this.getList(1)},getList:function(t){var e=this,a={};switch(a.nickName=this.form.applyPeople,a.withdraNo=this.form.withdraNo,a.startTime=0==this.form.time.length?"":c.a.formatTime(this.form.time[0],1),a.endTime=0==this.form.time.length?"":c.a.formatTime(this.form.time[1],1),this.activeName){case"1":a.status="";break;case"2":a.status="0";break;case"3":a.status="1";break;case"4":a.status="2"}this.page.currentPage=t,a.page=t,a.url=u.queryWithdrawMoneyList,this.$axios.post(d.queryWithdrawMoneyList,a).then(function(t){e.tableData=[],e.page.totalPage=t.data.data.resultCount,e.tableData=t.data.data.data})},resetForm:function(t){this.$refs[t].resetFields(),this.getList(1)},updata:function(t){this.getList(this.page.currentPage)}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"witdrawal-audit"},[a("v-breadcrumb",{attrs:{nav:["结算管理","提现审核"]}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"30px"}}},[a("el-form",{ref:"form",attrs:{model:t.form,inline:""}},[a("el-form-item",{attrs:{prop:"applyPeople",label:"申请人"}},[a("el-input",{attrs:{placeholder:"请输入申请人"},model:{value:t.form.applyPeople,callback:function(e){t.$set(t.form,"applyPeople",e)},expression:"form.applyPeople"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"withdraNo",label:"提现编号"}},[a("el-input",{attrs:{placeholder:"请输入申请人"},model:{value:t.form.withdraNo,callback:function(e){t.$set(t.form,"withdraNo",e)},expression:"form.withdraNo"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"time",label:"发起时间"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getList(1)}}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm("form")}}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"20px"},attrs:{"body-style":{padding:"30px"}}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部申请",name:"1"}},["1"==t.activeName?a("v-tab",{attrs:{tableData:t.tableData},on:{updataData:t.updata}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"待确认",name:"2"}},["2"==t.activeName?a("v-tab",{attrs:{tableData:t.tableData},on:{updataData:t.updata}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"已确认",name:"3"}},["3"==t.activeName?a("v-tab",{attrs:{tableData:t.tableData},on:{updataData:t.updata}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"已驳回",name:"4"}},["4"==t.activeName?a("v-tab",{attrs:{tableData:t.tableData},on:{updataData:t.updata}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.page.currentPage,layout:"total, prev, pager, next, jumper",total:t.page.totalPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(v,w,!1,function(t){a("XNkP")},"data-v-062883bb",null);e.default=y.exports},XNkP:function(t,e){}});