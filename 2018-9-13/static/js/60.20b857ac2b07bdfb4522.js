webpackJsonp([60],{"6jTU":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("FMx0"),i=o("0xDb"),n=o.n(i),a=o("GVVA"),l={components:{vBreadcrumb:s.a},data:function(){return{nav:["拼店店铺管理","店铺等级设置","店铺降级设置"],showWeekTradNo:!1,showMemberNoEnough:!1,showdemotionWeekUserReduceOneExp:!1,showDemotionTotleSales:!1,form:{demotionWeekNoSaleExp:"",demotionWeekUserReduceOneExp:"",demotionWeekSalesFreq:"",demotionWeekSalesFreqExp:"",demotionTotleSales:"",demotionTotleSalesExp:""},shopId:"",isAjax:!1}},activated:function(){this.shopId=this.$route.query.demotionShopId||sessionStorage.getItem("demotionShopId"),console.log(this.shopId),this.getStoreStarById()},methods:{getStoreStarById:function(){var e=this,t={id:this.shopId};a.a.getStoreStarById(t).then(function(t){e.form=t.data}).catch(function(e){console.log(e)})},cleanData:function(){n.a.cleanFormData(this.form)},sure:function(e){var t=this,o=void 0;switch(e){case 0:o=9;break;case 1:o=10;break;case 2:o=11;break;case 3:o=12}var s=this.form;s.id=this.shopId,s.type=o;var i=!0,n=!0;0==e?(i=this.isEmpty(s.demotionWeekNoSaleExp,!1),this.setIsAjax(i)):1==e?(i=this.isEmpty(s.demotionWeekUserReduceOneExp,!1),this.setIsAjax(i)):2==e?(i=this.isEmpty(s.demotionWeekSalesFreq,!0),n=this.isEmpty(s.demotionWeekSalesFreqExp,!1),this.setIsAjax(i&&n)):3==e&&(i=this.isEmpty(s.demotionTotleSales,!0),n=this.isEmpty(s.demotionTotleSalesExp,!1),this.setIsAjax(i&&n)),this.isAjax&&a.a.updateStoreStar(s).then(function(e){t.$message.success("设置成功"),t.showWeekTradNo=!1,t.showMemberNoEnough=!1,t.showdemotionWeekUserReduceOneExp=!1,t.showDemotionTotleSales=!1,t.getStoreStarById()}).catch(function(e){console.log(e)})},isEmpty:function(e,t){if(null==e||void 0==e||""==e)return t?this.$message.warning("请输入整数!"):this.$message.warning("请输入数值!"),!1;if(t){return this.setReg(/^[1-9]*[1-9][0-9]*$/,e)}return this.setReg(/^[0-9]+([.]{1}[0-9]{1,2})?$/,e)},setReg:function(e,t){return!!e.test(t)||(this.$message.warning("请输入合法数据!"),!1)},setIsAjax:function(e){this.isAjax=!!e}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"demotion-shop"},[o("v-breadcrumb",{attrs:{nav:e.nav}}),e._v(" "),o("el-card",{attrs:{"body-style":{padding:"20px 80px",minHeight:"60vh"}}},[o("p",{staticClass:"small-title"},[e._v("基础设置")]),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:function(t){e.showWeekTradNo=!0}}},[e._v("无交易额条件")]),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:function(t){e.showMemberNoEnough=!0}}},[e._v("人数不足条件")]),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:function(t){e.showdemotionWeekUserReduceOneExp=!0}}},[e._v("周期交易频率")]),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:function(t){e.showDemotionTotleSales=!0}}},[e._v("周期交易额")])],1),e._v(" "),o("el-dialog",{attrs:{title:"每周交易额无成长",visible:e.showWeekTradNo,width:"30%",open:"cleanData"},on:{"update:visible":function(t){e.showWeekTradNo=t}}},[o("p",{staticClass:"dialog-item"},[o("span",{staticClass:"dialog-title"},[e._v("扣除经验值")]),e._v(" "),o("el-input",{staticClass:"dialog-inp",attrs:{placeholder:"请输入数值"},model:{value:e.form.demotionWeekNoSaleExp,callback:function(t){e.$set(e.form,"demotionWeekNoSaleExp",t)},expression:"form.demotionWeekNoSaleExp"}}),e._v("\n            分\n        ")],1),e._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(0)}}},[e._v("确 定")]),e._v(" "),o("el-button",{on:{click:function(t){e.showWeekTradNo=!1}}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{attrs:{title:"人数不足条件",visible:e.showMemberNoEnough,width:"30%",open:"cleanData"},on:{"update:visible":function(t){e.showMemberNoEnough=t}}},[o("p",{staticClass:"dialog-item"},[o("span",{staticStyle:{"margin-left":"30px"}},[e._v("人数每减少1人，则扣除")])]),e._v(" "),o("p",{staticClass:"dialog-item"},[o("el-input",{staticClass:"dialog-inp",staticStyle:{"margin-left":"30px"},attrs:{placeholder:"请输入数值"},model:{value:e.form.demotionWeekUserReduceOneExp,callback:function(t){e.$set(e.form,"demotionWeekUserReduceOneExp",t)},expression:"form.demotionWeekUserReduceOneExp"}}),e._v("\n            分\n        ")],1),e._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(1)}}},[e._v("确 定")]),e._v(" "),o("el-button",{on:{click:function(t){e.showMemberNoEnough=!1}}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{attrs:{title:"每周交易频率",visible:e.showdemotionWeekUserReduceOneExp,width:"30%",open:"cleanData"},on:{"update:visible":function(t){e.showdemotionWeekUserReduceOneExp=t}}},[o("p",{staticClass:"dialog-item"},[o("span",{staticClass:"dialog-title"},[e._v("交易频率低于")]),e._v(" "),o("el-input",{staticClass:"dialog-inp",attrs:{placeholder:"请输入数值"},model:{value:e.form.demotionWeekSalesFreq,callback:function(t){e.$set(e.form,"demotionWeekSalesFreq",t)},expression:"form.demotionWeekSalesFreq"}}),e._v("\n            次\n        ")],1),e._v(" "),o("p",{staticClass:"dialog-item"},[o("span",{staticClass:"dialog-title"},[e._v("扣除经验值")]),e._v(" "),o("el-input",{staticClass:"dialog-inp",attrs:{placeholder:"请输入数值"},model:{value:e.form.demotionWeekSalesFreqExp,callback:function(t){e.$set(e.form,"demotionWeekSalesFreqExp",t)},expression:"form.demotionWeekSalesFreqExp"}}),e._v("\n            分\n        ")],1),e._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(2)}}},[e._v("确 定")]),e._v(" "),o("el-button",{on:{click:function(t){e.showdemotionWeekUserReduceOneExp=!1}}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{attrs:{title:"每周交易额",visible:e.showDemotionTotleSales,width:"30%",open:"cleanData"},on:{"update:visible":function(t){e.showDemotionTotleSales=t}}},[o("p",{staticClass:"dialog-item"},[o("span",{staticClass:"dialog-title"},[e._v("交易额低于")]),e._v(" "),o("el-input",{staticClass:"dialog-inp",attrs:{placeholder:"请输入数值"},model:{value:e.form.demotionTotleSales,callback:function(t){e.$set(e.form,"demotionTotleSales",t)},expression:"form.demotionTotleSales"}}),e._v("\n            元\n        ")],1),e._v(" "),o("p",{staticClass:"dialog-item"},[o("span",{staticClass:"dialog-title"},[e._v("扣除经验值")]),e._v(" "),o("el-input",{staticClass:"dialog-inp",attrs:{placeholder:"请输入数值"},model:{value:e.form.demotionTotleSalesExp,callback:function(t){e.$set(e.form,"demotionTotleSalesExp",t)},expression:"form.demotionTotleSalesExp"}}),e._v("\n            分\n        ")],1),e._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(3)}}},[e._v("确 定")]),e._v(" "),o("el-button",{on:{click:function(t){e.showDemotionTotleSales=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var c=o("VU/8")(l,r,!1,function(e){o("od3a")},null,null);t.default=c.exports},od3a:function(e,t){}});