webpackJsonp([3],{"3Cnd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"queryAllGiftBagOrderPageList",function(){return r}),a.d(t,"getGiftBagOrderDetail",function(){return s}),a.d(t,"orderSendOutGift",function(){return o});var r="/admin/gbGiftBagOrder/queryAllGiftBagOrderPageList",s="/admin/gbGiftBagOrder/getGiftBagOrderDetail",o="/admin/order/orderSendOutGift"},"9bBU":function(e,t,a){a("mClu");var r=a("FeBl").Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},BPDs:function(e,t,a){"use strict";a.d(t,"c",function(){return r}),a.d(t,"d",function(){return s}),a.d(t,"g",function(){return o}),a.d(t,"h",function(){return n}),a.d(t,"i",function(){return i}),a.d(t,"f",function(){return d}),a.d(t,"e",function(){return l}),a.d(t,"a",function(){return c}),a.d(t,"b",function(){return u});var r="/admin/order/orderSign",s="/admin/gbGiftBagOrder/queryAllGiftBagOrderPageList",o="/admin/gbGiftBagOrder/queryUnPayGiftBagOrderPageList",n="/admin/gbGiftBagOrder/queryUnSendOutGiftBagOrderPageList",i="/admin/gbGiftBagOrder/queryUnVerifyGiftBagOrderPageList",d="/admin/gbGiftBagOrder/queryCompletedGiftBagOrderPageList",l="/admin/gbGiftBagOrder/queryClosedGiftBagOrderPageList",c="/admin/gbGiftBagOrder/getGiftBagOrderDetail",u="/admin/order/orderSendOut"},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},CT0Y:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("bOdI"),s=a.n(r),o=a("FMx0"),n=a("BPDs"),i=a("3Cnd"),d=a("0xDb"),l=a.n(d),c={components:{vBreadcrumb:o.a},data:function(){return s()({nav:["订单管理","订单详情"],p:{orderSendOutGift:!1},detailUrl:"",orderId:"",boolFirst:!1,boolsec:!1,boolThr:!1,boolFor:!1,isShowPop:!1,isShowWarehouse:!1,orderStatus:"",pickedUp:"",markArr:[{label:"red",value:"1"},{label:"skyblue",value:"2"},{label:"lightgreen",value:"3"},{label:"orange",value:"4"},{label:"purple",value:"5"}],tableData:[],warehouseArr:[],orderFreeTime:"",orderFinishTime:"",orderFreePayTime:"",orderMsg:{starIndex:"",status:"",star:"",adminRemark:"",nickName:"",phone:"",receiver:"",recevicePhone:"",receiveAddress:"",buyerRemark:"",storehouseName:"",orderNum:"",createTime:"",payTime:"",deliveryTime:"",tradeNo:"",sendTime:"",cancleTime:"",expressName:"",expressNo:""}},"markArr",[{label:"red",value:"1"},{label:"skyblue",value:"2"},{label:"lightgreen",value:"3"},{label:"orange",value:"4"},{label:"purple",value:"5"}])},activated:function(){this.orderId=this.$route.query.giftOrderInfoId||sessionStorage.getItem("giftOrderInfoId"),this.getInfo(),this.orderFinishTimeDown(),this.pControl()},deactivated:function(){clearInterval(this.freeTimer),clearInterval(this.confirmTimer)},methods:{pControl:function(){for(var e in this.p)this.p[e]=l.a.pc(i[e])},getInfo:function(){var e=this;this.$axios.post(n.a,{giftBagOrderId:this.orderId}).then(function(t){e.orderMsg.status=t.data.data.status,e.orderStatus=t.data.data.status,e.getProgressStu(e.orderStatus.toString()),e.orderMsg.starIndex=t.data.data.star||1,e.orderMsg.star=null==t.data.data.star?"":e.markArr[t.data.data.star-1].label,e.orderMsg.adminRemark=t.data.data.adminRemark,e.orderMsg.nickName=t.data.data.nickname,e.orderMsg.phone=t.data.data.phone,e.orderMsg.receiver=t.data.data.receiver,e.orderMsg.recevicePhone=t.data.data.recevicePhone,e.orderMsg.receiveAddress=""+(void 0==t.data.data.province?"":t.data.data.province)+t.data.data.city+t.data.data.area,e.orderMsg.buyerRemark=t.data.data.buyerRemark,e.orderMsg.orderNum=t.data.data.orderNum,e.orderMsg.createTime=t.data.data.createTime,e.orderMsg.payTime=t.data.data.payTime,e.orderMsg.deliveryTime=t.data.data.deliveryTime,e.orderMsg.sendTime=t.data.data.sendTime,e.orderMsg.tradeNo=t.data.data.tradeNo,e.orderMsg.expressName=t.data.data.expressName,e.orderMsg.expressNo=t.data.data.expressNo,e.tableData=[],e.pickedUp=t.data.data.pickedUp,t.data.data.list.forEach(function(a,r){a.totalPrice=t.data.data.totalPrice,a.freightPrice=t.data.data.freightPrice,a.tokenCoin=null==t.data.data.tokenCoin?"0":t.data.data.tokenCoin,a.balance=null==t.data.data.balance?"0":t.data.data.balance,a.userScore=null==t.data.data.userScore?"0":t.data.data.userScore,a.type=t.data.data.payType,a.amounts=null==t.data.data.amounts?"0":t.data.data.amounts,e.tableData.push(a)}),t.data.data.overtimeClosedTime&&e.orderFreeTimeDown(t.data.data.overtimeClosedTime),t.data.data.autoConfirmTime&&e.orderFinishTimeDown(t.data.data.autoConfirmTime)}).catch(function(e){console.log(res)})},resetForm:function(e){this.$refs[e].resetFields()},getProgressStu:function(e){switch(e){case"1":case"2":case"3":this.boolFirst=!0,this.boolsec=!0,this.boolThr=!0,this.boolFor=!1;break;case"7":case"8":this.boolFirst=!0,this.boolsec=!0,this.boolThr=!0,this.boolFor=!0}},spanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(5==a||6==a)return 0==t?{rowspan:this.tableData.length,colspan:1}:[0,0]},orderFreeTimeDown:function(e){var t=e,a=this;this.freeTimer=setInterval(function(){var e=(new Date).getTime(),r=t-e;if(r<=0)return a.orderFreeTime="00:00:00",void clearInterval(this.freeTimer);var s=Math.floor(r/1e3/60/60%60),o=Math.floor(r/1e3/60%60),n=Math.floor(r/1e3%60);s=s>9?s:"0"+s,o=o>9?o:"0"+o,n=n>9?n:"0"+n,a.orderFreeTime=s+":"+o+":"+n},1e3)},orderFinishTimeDown:function(e){var t=e,a=this;this.confirmTimer=setInterval(function(){var e=(new Date).getTime(),r=t-e;if(r<=0)return clearInterval(this.confirmTimer),void(a.orderFinishTime="00:00:00");var s=Math.floor(r/1e3/60/60%60),o=Math.floor(r/1e3/60%60),n=Math.floor(r/1e3%60);s=s>9?s:"0"+s,o=o>9?o:"0"+o,n=n>9?n:"0"+n,a.orderFinishTime=s+":"+o+":"+n},1e3)},showLogisticsMsg:function(){sessionStorage.setItem("findExpressId",this.orderId),this.$router.push({name:"logistics",query:{findExpressId:this.orderId}})},orderSendOut:function(){var e=this;this.$axios.post(n.b,{orderId:this.orderId}).then(function(t){e.$message.success(t.data.data),e.getInfo()}).catch(function(e){console.log(e)})},changeColor:function(e,t){var a=this,r={};r.orderId=this.orderId,r.star=1==e?t.value:this.orderMsg.starIndex,r.remarks=this.orderMsg.adminRemark,this.$axios.post(n.c,r).then(function(e){a.$message.success(e.data.data),a.orderMsg.star=a.markArr[Number(r.star)-1].label,a.isShowPop=!1}).catch(function(e){console.log(res)})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-info"},[a("v-breadcrumb",{attrs:{nav:e.nav}}),e._v(" "),a("el-card",{attrs:{"body-style":{padding:"28px 50px"}}},[a("div",{staticClass:"order-status"},[a("div",{class:{"s-block":!0,"s-block-bgcolor":e.boolFirst}},[a("div",{staticClass:"s-block-content"},[e._v("买家下单")])]),e._v(" "),a("div",{class:{"s-block":!0,"s-block-bgcolor":e.boolsec}},[a("div",{staticClass:"s-block-content"},[e._v("买家付款")])]),e._v(" "),a("div",{class:{"s-block":!0,"s-block-bgcolor":e.boolThr}},[a("div",{staticClass:"s-block-content"},[e._v("发货")])]),e._v(" "),a("div",{class:{"s-block":!0,"s-block-bgcolor":e.boolFor}},[a("div",{staticClass:"s-block-content"},[e._v("买家确认收货")])])]),e._v(" "),a("div",{staticClass:"top"},[1==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：待支付")]):e._e(),e._v(" "),2==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：待发货")]):e._e(),e._v(" "),3==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：待收货")]):e._e(),e._v(" "),4==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：待自提")]):e._e(),e._v(" "),5==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：已完成（确认收货）")]):e._e(),e._v(" "),6==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：已关闭（退款关闭）")]):e._e(),e._v(" "),7==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：已完成")]):e._e(),e._v(" "),8==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：已关闭")]):e._e(),e._v(" "),9==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：用户删除")]):e._e(),e._v(" "),10==e.orderStatus?a("span",{staticClass:"activite-status"},[e._v("当前订单状态：超时关闭")]):e._e(),e._v(" "),1==e.orderStatus?a("span",{staticClass:"pay-time"},[e._v("订单剩余时间："+e._s(e.orderFreeTime))]):e._e(),e._v(" "),3==e.orderStatus?a("span",{staticClass:"pay-time"},[e._v("订单待完成时间："+e._s(e.orderFinishTime))]):e._e(),e._v(" "),a("br"),a("br"),a("br"),e._v(" "),2==e.orderStatus&&e.p.orderSendOutGift?a("el-button",{staticClass:"cloud-delivery-btn",attrs:{type:"danger"},on:{click:e.orderSendOut}},[e._v("云仓发货")]):e._e(),e._v(" "),a("span",{staticClass:"mark"},[e._v("标记")]),e._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"150",trigger:"hover"},model:{value:e.isShowPop,callback:function(t){e.isShowPop=t},expression:"isShowPop"}},[a("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[a("span",{staticClass:"star",style:{color:e.orderMsg.star}},[e._v("★")])]),e._v(" "),e._l(e.markArr,function(t,r){return a("span",{key:r,style:{color:t.label,fontSize:"22px",cursor:"pointer",marginRight:"5px"},on:{click:function(a){e.changeColor(1,t)}}},[e._v("★")])})],2),e._v(" "),a("el-input",{staticStyle:{width:"50%",float:"right","margin-right":"42%"},attrs:{type:"textarea",placeholder:"请输入备注",rows:5},on:{blur:function(t){e.changeColor()}},model:{value:e.orderMsg.adminRemark,callback:function(t){e.$set(e.orderMsg,"adminRemark",t)},expression:"orderMsg.adminRemark"}})],1),e._v(" "),a("div",{staticClass:"user-info"},[a("p",{staticClass:"info-title"},[e._v("买家信息")]),e._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"smal-span"},[e._v("昵称："+e._s(e.orderMsg.nickName))]),e._v(" "),a("span",{staticClass:"smal-span"},[e._v("联系方式："+e._s(e.orderMsg.phone))])]),e._v(" "),a("p",{staticClass:"info-title"},[e._v("收货地址")]),e._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"smal-span"},[e._v("收货人："+e._s(e.orderMsg.receiver))]),e._v(" "),a("span",{staticClass:"smal-span"},[e._v("收货人联系方式："+e._s(e.orderMsg.recevicePhone))])]),e._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"smal-span"},[e._v("收货地址："+e._s(e.orderMsg.receiveAddress))])]),e._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"smal-span"},[e._v("买家备注："+e._s(e.orderMsg.buyerRemark))])]),e._v(" "),a("p",{staticClass:"info-title"},[e._v("物流信息")]),e._v(" "),a("p",{staticClass:"info-content"},[a("span",{staticClass:"smal-span"},[e._v("物流公司名称："+e._s(e.orderMsg.expressName))]),e._v(" "),a("span",{staticClass:"smal-span"},[e._v("运单号："+e._s(e.orderMsg.expressNo))]),e._v(" "),3==e.orderStatus||7==e.orderStatus?a("span",{staticStyle:{color:"#33b4ff",cursor:"pointer"},on:{click:e.showLogisticsMsg}},[e._v("查看物流信息")]):e._e()])]),e._v(" "),a("div",{staticClass:"order-info"},[a("p",{staticClass:"info-content"},[a("span",{staticClass:"content-con"},[e._v("订单号："+e._s(e.orderMsg.orderNum))]),e._v(" "),a("span",{staticClass:"content-con"},[e._v("创建时间："+e._s(e._f("formatDate")(e.orderMsg.createTime)))]),e._v(" "),8!=e.orderStatus?a("span",{staticClass:"content-con"},[e._v("平台支付时间："+e._s(e._f("formatDate")(e.orderMsg.payTime)))]):e._e(),e._v(" "),1!=e.orderStatus&&8!=e.orderStatus?a("span",{staticClass:"content-con"},[e._v("第三方支付时间："+e._s(e._f("formatDate")(e.orderMsg.payTime)))]):e._e()]),e._v(" "),a("p",{staticClass:"info-content"},[3==e.orderStatus||7==e.orderStatus?a("span",{staticClass:"content-con"},[e._v("发货时间："+e._s(e._f("formatDate")(e.orderMsg.sendTime)))]):e._e(),e._v(" "),8==e.orderStatus?a("span",{staticClass:"content-con"},[e._v("关闭时间："+e._s(e.orderMsg.cancleTime))]):e._e(),e._v(" "),1!=e.orderStatus&&8!=e.orderStatus?a("span",{staticClass:"content-con"},[e._v("支付宝（第三方支付）交易号："+e._s(e.orderMsg.tradeNo))]):e._e(),e._v(" "),7==e.orderStatus?a("span",{staticClass:"content-con"},[e._v("完成时间："+e._s(e._f("formatDate")(e.orderMsg.deliveryTime)))]):e._e()]),e._v(" "),a("el-table",{attrs:{border:"",data:e.tableData,"span-method":e.spanMethod}},[a("el-table-column",{attrs:{label:"产品名称",align:"center",width:"500px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name"},[a("img",{attrs:{src:t.row.imgUrl,alt:""}}),e._v(" "),a("span",{staticClass:"pro-name"},[e._v(e._s(t.row.productName))]),e._v(" "),a("span",{staticClass:"pro-spec"},[e._v(e._s(t.row.spec))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"单价",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"买家",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("收货人："+e._s(t.row.receiver))]),a("br"),e._v(" "),a("span",[e._v(e._s(t.row.recevicePhone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"交易状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?[e._v("待支付")]:2==t.row.status?[e._v("待收货")]:3==t.row.status?[e._v("确认收货")]:4==t.row.status?[e._v("退款中")]:5==t.row.status?[e._v("退货中")]:6==t.row.status?[e._v("换货中")]:8==t.row.status?[e._v("已完成")]:9==t.row.status?[e._v("已关闭")]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"实收款",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    实收款:"+e._s(e._f("handleMoney")(t.row.totalPrice))),a("br"),e._v("\n                    （含运费:"+e._s(e._f("handleMoney")(t.row.freightPrice))+"）\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"实收款",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    代币支付:"+e._s(t.row.tokenCoin)+"枚"),a("br"),e._v("\n                    余额支付:"+e._s(e._f("handleMoney")(t.row.balance))),a("br"),e._v("\n                    积分抵扣:"+e._s(t.row.userScore)),a("br"),e._v(" "),0!=(1&t.row.type)?[e._v("平台支付")]:e._e(),e._v(" "),0!=(2&t.row.type)?[e._v("微信小程序 ")]:e._e(),e._v(" "),0!=(4&t.row.type)?[e._v("APP支付 ")]:e._e(),e._v(" "),0!=(8&t.row.type)?[e._v("支付宝 ")]:e._e(),e._v(" "),0!=(16&t.row.type)?[e._v("银联 ")]:e._e(),e._v("\n                    "+e._s(e._f("handleMoney")(t.row.amounts))+"\n                ")]}}])})],1)],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(c,u,!1,function(e){a("kF/0")},null,null);t.default=v.exports},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var r,s=a("C4MV"),o=(r=s)&&r.__esModule?r:{default:r};t.default=function(e,t,a){return t in e?(0,o.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},"kF/0":function(e,t){},mClu:function(e,t,a){var r=a("kM2E");r(r.S+r.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});