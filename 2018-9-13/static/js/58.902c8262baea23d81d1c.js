webpackJsonp([58],{"/xIB":function(e,t){},"1PGL":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("FMx0"),l=o("0xDb"),r=o.n(l),n=o("EkIv"),i=o("m6zT"),s=o("GVVA"),d={components:{vBreadcrumb:a.a,deleteToast:n.a},data:function(){return{nav:["拼店店铺管理","店铺等级设置"],diaTitle:"",isShowAddShopLevel:!1,isShowDelToast:!1,tableData:[],delId:0,delUrl:"http://api",delUri:"",form:{name:"",level:"",autoUpgrade:"1",maxUser:"",groupMoney:"",remark:""},itype:"",id:"",btnLoading:!1}},activated:function(){this.getList()},methods:{getList:function(){var e=this;s.a.getAllStoreStar({}).then(function(t){e.tableData=[],e.tableData=t.data}).catch(function(e){console.log(e)})},addShopLevel:function(){this.diaTitle="添加店铺等级",r.a.cleanFormData(this.form),this.isShowAddShopLevel=!0,this.itype="add",this.getMaxLevel()},editShopLevel:function(e){this.diaTitle="编辑店铺等级",this.isShowAddShopLevel=!0,this.itype="edit",this.id=e.id,this.form.name=e.name,this.form.level=e.level,this.form.autoUpgrade=e.autoUpgrade.toString(),this.form.maxUser=e.maxUser,this.form.groupMoney=e.groupMoney,this.form.remark=e.remark},confirmAddShopLevel:function(){var e=this,t=this.form;if(t.name)if(t.level)if(t.autoUpgrade)if(t.maxUser)if(t.groupMoney){this.isShowAddShopLevel=!1;var o="";"add"==this.itype?o="addStoreStar":(t.id=this.id,o="updateStoreStarById"),this.btnLoading=!0,s.a[o](t).then(function(t){e.getList(),e.btnLoading=!1}).catch(function(t){console.log(t),e.btnLoading=!1})}else this.$message.warning("请输入拼店金额!");else this.$message.warning("请输入店铺人数!");else this.$message.warning("请选择是否自动晋级!");else this.$message.warning("请输入层级!");else this.$message.warning("请输入等级名称!")},cancel:function(){this.isShowAddShopLevel=!1,this.getList()},shopPromotion:function(e){sessionStorage.setItem("promotionShopId",e.id),this.$router.push({name:"promotionShop",query:{promotionShopId:e.id}})},shopDemotion:function(e){sessionStorage.setItem("demotionShopId",e.id),this.$router.push({name:"demotionShop",query:{demotionShopId:e.id}})},delItem:function(e){this.delId=e,this.delUrl="deleteStoreStar",this.delUri=i.b,this.isShowDelToast=!0},deleteToast:function(e){this.isShowDelToast=e,this.getList()}}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"shop-level-set"},[o("v-breadcrumb",{attrs:{nav:e.nav}}),e._v(" "),o("el-card",{attrs:{"body-style":{padding:"20px 40px"}}},[o("el-table",{attrs:{border:"",data:e.tableData}},[o("el-table-column",{attrs:{type:"index",label:"编号",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"level",label:"层级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[[e._v(e._s(t.row.level)+"级")]]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"maxUser",label:"人数限制",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"groupMoney",label:"拼店金额",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"remark",label:"备注说明",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"autoUpgrade",label:"自动晋级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.autoUpgrade?[e._v("不自动")]:e._e(),e._v(" "),1==t.row.autoUpgrade?[e._v("自动")]:e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center",minWidth:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){e.shopPromotion(t.row)}}},[e._v("晋级设置")]),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:function(o){e.shopDemotion(t.row)}}},[e._v("降级设置")]),e._v(" "),o("el-button",{attrs:{type:"warning"},on:{click:function(o){e.editShopLevel(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.diaTitle,visible:e.isShowAddShopLevel,width:"30%"},on:{"update:visible":function(t){e.isShowAddShopLevel=t}}},[o("el-form",{attrs:{model:e.form,"label-width":"100px"}},[o("el-form-item",{attrs:{prop:"name",label:"等级名称"}},[o("el-input",{attrs:{placeholder:"请输入等级名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"level",label:"层级"}},[o("el-input",{attrs:{placeholder:"6级（自动获取、可修改、但是不可重复）"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"autoUpgrade",label:"自动晋级"}},[o("el-radio",{attrs:{label:"1"},model:{value:e.form.autoUpgrade,callback:function(t){e.$set(e.form,"autoUpgrade",t)},expression:"form.autoUpgrade"}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:"0"},model:{value:e.form.autoUpgrade,callback:function(t){e.$set(e.form,"autoUpgrade",t)},expression:"form.autoUpgrade"}},[e._v("否")])],1),e._v(" "),o("el-form-item",{attrs:{prop:"maxUser",label:"店铺人数设置"}},[o("el-input",{attrs:{placeholder:"请输入限制人数"},model:{value:e.form.maxUser,callback:function(t){e.$set(e.form,"maxUser",t)},expression:"form.maxUser"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"groupMoney",label:"拼店金额设置"}},[o("el-input",{attrs:{placeholder:"请输入金额"},model:{value:e.form.groupMoney,callback:function(t){e.$set(e.form,"groupMoney",t)},expression:"form.groupMoney"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"remark",label:"备注说明"}},[o("el-input",{attrs:{placeholder:"请输入说明"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),o("span",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.confirmAddShopLevel}},[e._v("确 定")]),e._v(" "),o("el-button",{on:{click:function(t){e.isShowAddShopLevel=!1}}},[e._v("取 消")])],1)],1),e._v(" "),e.isShowDelToast?o("delete-toast",{attrs:{id:e.delId,url:e.delUrl,uri:e.delUri},on:{msg:e.deleteToast}}):e._e()],1)},staticRenderFns:[]};var m=o("VU/8")(d,p,!1,function(e){o("/xIB")},null,null);t.default=m.exports}});