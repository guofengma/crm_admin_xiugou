webpackJsonp([94],{"9E0j":function(t,e){},f77T:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("woOf"),s=a.n(r),o=a("FMx0"),i=a("aGLR"),l=a("OSiu"),n=a("0xDb"),c=a.n(n),d=a("PJh5"),u=a.n(d),p=a("xnHa"),v={components:{vBreadcrumb:o.a},mixins:[p.b],data:function(){return{nav:["订单管理","订单管理","待处理订单"],tabLoading:!1,w:{name:"25%",price:"8%",num:"8%",consignee:"12%",status:"8%",collection:"12%",shipper:"8%",operate:"15%",minWidth:"100px"},starArr:[{label:"红色标记",value:"1"},{label:"蓝色标记",value:"2"},{label:"绿色标记",value:"3"},{label:"黄色标记",value:"4"},{label:"紫色标记",value:"5"}],markArr:[{label:"red",value:"1"},{label:"skyblue",value:"2"},{label:"lightgreen",value:"3"},{label:"orange",value:"4"},{label:"purple",value:"5"}],status:"",dateRange:[],form:{orderNum:"",productName:"",receiver:"",recevicePhone:"",stars:"",today:"",yesterday:"",threeMonths:"",closeReason:"",pickUp:"",applyForType:"",serviceStatus:""},url:"",priUrl:"",tableData:[]}},created:function(){this.priUrl=l.queryAllOrderPageList},activated:function(){this.pControl(),this.getList(1)},methods:{pControl:function(){for(var t in this.p)this.p[t]=c.a.pc(l[t])},getList:function(t){var e=this;this.page.currentPage=1,this.tableData=[];var a={};a.startTime=0!=this.dateRange.length?u()(this.dateRange[0]).format("YYYY-MM-DD HH:mm:ss"):"",a.endTime=0!=this.dateRange.length?u()(this.dateRange[1]).format("YYYY-MM-DD HH:mm:ss"):"",s()(a,this.form),a.page=t,a.url=this.priUrl,this.tabLoading=!0,this.$axios.post(i.n,a).then(function(t){for(var a in e.tabLoading=!1,t.data.data.data)t.data.data.data[a].isShowPop=!1,t.data.data.data[a].starColor=void 0==e.markArr[t.data.data.data[a].stars]?"#ccc":e.markArr[t.data.data.data[a].stars-1].label,t.data.data.data[a].price=null==t.data.data.data[a].totalPrice?"0":t.data.data.data[a].totalPrice,e.tableData.push(t.data.data.data[a]);e.page.totalPage=t.data.data.resultCount,e.form.today="",e.form.yesterday="",e.form.threeMonths=""}).catch(function(t){e.tabLoading=!1,console.log(t)})},resetForm:function(t){this.$refs[t].resetFields(),this.form.today="",this.form.yesterday="",this.form.threeMonths="",this.dateRange=[]},handleClick:function(t){this.activeName=t.name,this.getQueryStatus(this.activeName)},getQueryStatus:function(t){"allOrder"==t?(this.url=i.k,this.priUrl=l.queryAllOrderPageList,this.status=""):"toBePaid"==t?(this.url=i.q,this.priUrl=l.queryUnPaidOrderPageList,this.status="待支付"):"toBeSend"==t?(this.url="5",this.status="待发货",this.url=i.r,this.priUrl=l.queryUnSendOutOrderPageList):"toBeStay"==t?(this.url=i.o,this.priUrl=l.queryPickUpByCustomerOrderPageList,this.status="待自提"):"toBeConfirm"==t?(this.url=i.s,this.priUrl=l.queryWaitReceivingOrderPageList,this.status="待确认"):"finished"==t?(this.url=i.m,this.priUrl=l.queryCompletedOrderPageList,this.status="已完成"):"closed"==t&&(this.url=i.l,this.priUrl=l.queryClosedOrderPageList,this.status="已关闭"),this.getList(1)},changeColor:function(t,e){var a=this,r={};r.orderId=e.id,r.star=t.value,r.remarks=e.adminRemark,r.url=l.orderSign,this.$axios.post(i.h,r).then(function(r){a.$message.success(r.data.data),e.starColor=t.label,e.isShowPop=!1}).catch(function(t){console.log(res)})},pushCloud:function(t){var e=this;this.$axios.post(i.g,{orderId:t.id,url:l.orderSendOut}).then(function(t){e.$message.success(t.data.data),e.getList(e.page.currentPage)}).catch(function(t){console.log(t)})},orderInfo:function(t){sessionStorage.setItem("orderInfoId",t.id),this.$router.push({name:"orderInfo",query:{orderInfoId:t.id}})},orderCheckBox:function(t){console.log(t)},orderBtn:function(t){"today"==t?(this.form.today="yes",this.form.yesterday="",this.form.threeMonths=""):"yesterday"==t?(this.form.today="",this.form.yesterday="yes",this.form.threeMonths=""):"threeMonths"==t&&(this.form.today="",this.form.yesterday="",this.form.threeMonths="yes"),this.getList(1)},changeStatus:function(t,e){var a=this;3==e&&this.$axios.post(i.j,{orderProductId:t.id,url:l.pickUpOrderProduct}).then(function(t){a.$message.success(t.data.data),a.getList(1)}).catch(function(t){console.log(t)})},unDealOrder:function(){this.$router.push("/undealOrder")},toAfterSale:function(t){sessionStorage.setItem("afterSaleOprId",t),this.$router.push({path:"/afterSaleOpr",query:{afterSaleOprId:t}})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-list"},[a("v-breadcrumb",{attrs:{nav:t.nav}}),t._v(" "),a("el-card",{staticClass:"query-panue",attrs:{"body-style":{padding:"20px 20px"}}},[a("el-form",{ref:"form",attrs:{model:t.form,inline:"","label-width":"120px"}},[a("el-form-item",{attrs:{prop:"orderNum",label:"订单编号"}},[a("el-input",{attrs:{placeholder:"请输入订单编号"},model:{value:t.form.orderNum,callback:function(e){t.$set(t.form,"orderNum",e)},expression:"form.orderNum"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"productName",label:"产品名称"}},[a("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.form.productName,callback:function(e){t.$set(t.form,"productName",e)},expression:"form.productName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"stars",label:"订单标记"}},[a("el-select",{attrs:{placeholder:"请选择订单标记"},model:{value:t.form.stars,callback:function(e){t.$set(t.form,"stars",e)},expression:"form.stars"}},t._l(t.starArr,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{prop:"receiver",label:"收货人姓名"}},[a("el-input",{attrs:{placeholder:"请输入收货人姓名"},model:{value:t.form.receiver,callback:function(e){t.$set(t.form,"receiver",e)},expression:"form.receiver"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"recevicePhone",label:"收货人手机"}},[a("el-input",{attrs:{placeholder:"请输入收货人手机号"},model:{value:t.form.recevicePhone,callback:function(e){t.$set(t.form,"recevicePhone",e)},expression:"form.recevicePhone"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"shutDownStatus",label:"关闭状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.closeReason,callback:function(e){t.$set(t.form,"closeReason",e)},expression:"form.closeReason"}},[a("el-option",{attrs:{label:"暂不选择",value:""}}),t._v(" "),a("el-option",{attrs:{label:"已关闭（超时关闭）",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"已关闭（用户关闭）",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"已关闭（退款关闭）",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"pickUp",label:"完成类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.pickUp,callback:function(e){t.$set(t.form,"pickUp",e)},expression:"form.pickUp"}},[a("el-option",{attrs:{label:"暂不选择",value:""}}),t._v(" "),a("el-option",{attrs:{label:"已完成（快递收货）",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"已完成（买家自提）",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"applyForType",label:"申请类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.applyForType,callback:function(e){t.$set(t.form,"applyForType",e)},expression:"form.applyForType"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"申请退款（退款退货）",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"申请退换（退货）",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"退款成功",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"退换成功",value:"4"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"serviceStatus",label:"售后状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.serviceStatus,callback:function(e){t.$set(t.form,"serviceStatus",e)},expression:"form.serviceStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"申请售后",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"售后成功",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"dateRange",label:"下单时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getList(1)}}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm("form")}}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"20px",minHeight:"90vh","overflow-x":"auto","min-width":"1336px"},attrs:{"body-style":{padding:"20px 50px"}}},[a("div",{staticClass:"btn-group"},[a("el-button",{attrs:{type:"primary"}},[t._v("批量导出")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.orderBtn("today")}}},[t._v("今日订单")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.orderBtn("yesterday")}}},[t._v("昨日订单")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(e){t.orderBtn("threeMonths")}}},[t._v("最近三个月订单")])],1),t._v(" "),[a("div",{staticClass:"tab-title"},[a("span",{staticClass:"spec",style:{width:t.w.name,minWidth:t.w.minWidth}},[t._v("产品名称")]),t._v(" "),a("span",{staticClass:"spec",style:{width:t.w.price,minWidth:t.w.minWidth}},[t._v("单价")]),t._v(" "),a("span",{staticClass:"spec",style:{width:t.w.num,minWidth:t.w.minWidth}},[t._v("数量")]),t._v(" "),a("span",{staticClass:"spec",style:{width:t.w.consignee,minWidth:t.w.minWidth}},[t._v("收货人")]),t._v(" "),a("span",{staticClass:"spec",style:{width:t.w.status,minWidth:t.w.minWidth}},[t._v("交易状态")]),t._v(" "),a("span",{staticClass:"spec",style:{width:t.w.collection,minWidth:t.w.minWidth}},[t._v("实收款")]),t._v(" "),a("span",{staticClass:"spec",style:{width:t.w.shipper,minWidth:t.w.minWidth}},[t._v("发货方")]),t._v(" "),a("span",{staticClass:"spec",style:{width:t.w.operate,minWidth:t.w.minWidth}},[t._v("操作")])]),t._v(" "),t._l(t.tableData,function(e,r){return a("div",{key:r,staticClass:"tab-wrap"},[a("div",{staticClass:"tab-content-title"},[a("el-checkbox",{on:{change:function(a){t.orderCheckBox(e)}}}),t._v(" "),a("span",[t._v("订单号："+t._s(e.orderNum))]),t._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[t._v("创建时间："+t._s(t._f("formatDate")(e.orderCreateTime)))]),t._v(" "),a("div",{staticClass:"operate-btn-group"},[a("span",{staticStyle:{margin:"0 15px 0 15px"},on:{click:function(a){t.orderInfo(e)}}},[t._v("订单详情")]),t._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"150",trigger:"click"},model:{value:e.isShowPop,callback:function(a){t.$set(e,"isShowPop",a)},expression:"v.isShowPop"}},[a("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[t._v("标记   "),a("span",{staticClass:"star",style:{color:e.starColor}},[t._v("★")])]),t._v(" "),t._l(t.markArr,function(r,s){return a("span",{key:s,style:{color:r.label,fontSize:"22px",cursor:"pointer",marginRight:"5px"},on:{click:function(a){t.changeColor(r,e)}}},[t._v("★")])}),t._v(" "),a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.adminRemark,callback:function(a){t.$set(e,"adminRemark",a)},expression:"v.adminRemark"}})],2)],1)],1),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"left"},t._l(e.orderProduct,function(e,r){return a("div",{key:r,staticClass:"bar"},[a("div",{staticClass:"name"},[a("img",{attrs:{src:e.imgUrl,alt:""}}),t._v(" "),a("span",{staticClass:"pro-name"},[t._v(t._s(e.productName))]),t._v(" "),a("span",{staticClass:"pro-spec"},[t._v(t._s(e.spec))])]),t._v(" "),a("div",{staticClass:"price"},[t._v(t._s(e.price))]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(e.num))]),t._v(" "),a("div",{staticClass:"consignee"},[t._v(t._s(e.receiver))])])})),t._v(" "),a("div",{staticClass:"center"},[a("div",{staticClass:"status",style:{height:120*e.orderProduct.length+e.orderProduct.length-1+"px",lineHeight:120*e.orderProduct.length+e.orderProduct.length-1+"px"}},[1==e.orderStatus?[t._v("待支付")]:t._e(),t._v(" "),2==e.orderStatus?[t._v("待发货")]:t._e(),t._v(" "),3==e.orderStatus?[t._v("待确认")]:t._e(),t._v(" "),4==e.orderStatus?[t._v("待自提")]:t._e(),t._v(" "),5==e.orderStatus?[t._v("确认收货")]:t._e(),t._v(" "),6==e.orderStatus?[t._v("已关闭(退款关闭)")]:t._e(),t._v(" "),7==e.orderStatus||9==e.orderStatus?[t._v("已完成")]:t._e(),t._v(" "),8==e.orderStatus?[t._v("已关闭(用户关闭)")]:t._e(),t._v(" "),10==e.orderStatus?[t._v("已关闭(超时关闭)")]:t._e()],2),t._v(" "),a("div",{staticClass:"collection",style:{height:120*e.orderProduct.length+e.orderProduct.length-1+"px",paddingTop:120*e.orderProduct.length/2-30+"px"}},[a("span",[t._v(t._s(t._f("handleMoney")(e.totalPrice))),a("br"),t._v("（含运费："+t._s(t._f("handleMoney")(e.freightPrice))+"）")])])]),t._v(" "),a("div",{staticClass:"right"},t._l(e.orderProduct,function(e,r){return a("div",{key:r,staticClass:"bar"},[a("div",{staticClass:"shipper"},[t._v(t._s(e.origin))]),t._v(" "),a("div",{staticClass:"operate"},[e.returnProductType?[1==e.returnProductType?[4==e.status?a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.toAfterSale(e.id)}}},[t._v("退款中")]):t._e(),t._v(" "),8==e.status?a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.toAfterSale(e.id)}}},[t._v("退款完成")]):t._e()]:t._e(),t._v(" "),2==e.returnProductType?[5==e.status?a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.toAfterSale(e.id)}}},[t._v("退货中")]):t._e(),t._v(" "),8==e.status?a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.toAfterSale(e.id)}}},[t._v("退货完成")]):t._e()]:t._e(),t._v(" "),3==e.returnProductType?[6==e.status?a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.toAfterSale(e.id)}}},[t._v("换货中")]):t._e(),t._v(" "),8==e.status?a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.toAfterSale(e.id)}}},[t._v("换货完成")]):t._e()]:t._e()]:[3==e.status||8==e.status?[t._v("已完成")]:t._e(),t._v(" "),4==e.status?a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.changeStatus(e,3)}}},[t._v("已自提")]):t._e()]],2)])}))])])})],t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.page.currentPage,layout:"total, prev, pager, next, jumper",total:t.page.totalPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)],1)},staticRenderFns:[]};var m=a("VU/8")(v,h,!1,function(t){a("9E0j")},null,null);e.default=m.exports}});