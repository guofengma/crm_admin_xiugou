webpackJsonp([145],{"4PTp":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("FMx0"),l=n("X3nD"),o=n("4cBs"),r={components:{vBreadcrumb:a.a},data:function(){return{nav:["品牌产品管理","产品管理","产品库存管理"],productId:"",btnLoading:!1,btnStyle:"primary",unit:"1",unitArr:[{label:"包",value:"1"},{label:"箱",value:"2"},{label:"件",value:"3"},{label:"条",value:"4"},{label:"盒",value:"5"},{label:"KG",value:"6"},{label:"吨",value:"7"},{label:"平米",value:"8"},{label:"立方",value:"9"}],tableData:[]}},computed:{unitName:function(){var t=this,e="";return this.unitArr.forEach(function(n,a){n.value==t.unit&&(e=n.label)}),e}},activated:function(){this.productId=this.$route.query.productInventoryId||sessionStorage.getItem("productInventory"),this.getInfo()},methods:{getInfo:function(){var t=this;this.tableData=[],this.$axios.post(l.n,{productId:this.productId,url:o.e}).then(function(e){e.data.data.forEach(function(e,n){e.btnStyle="primary",t.tableData.push(e)})}).catch(function(t){console.log(t)})},saveMsg:function(t){var e=this,n={};n.id=t.id,n.stock=t.stock,n.stock_unit=this.unit,n.url=o.e;/^\d+(?=\.{0,1}\d+$|$)/.test(t.stock)?(this.btnLoading=!0,this.$axios.post(l.w,n).then(function(n){e.$message.success(n.data.msg),e.btnLoading=!1,t.btnStyle="success"}).catch(function(t){console.log(t),e.btnLoading=!1})):this.$message.warning("请输入正确的库存")},tableHeadChange:function(t){this.unit=t},renderHeader:function(t,e){e.column,e.$index;return[t("div",{style:{margin:"8px -20px 0 0"}},["总库存"]),t("el-select",{style:{display:"inline-block",width:"120px","margin-top":"8px"},attrs:{value:this.unit,placeholder:""},on:{change:this.tableHeadChange}},this.unitArr.map(function(e,n){return t("el-option",{attrs:{label:e.label,value:e.value}})}))]},changeBtnStyle:function(t){t.btnStyle="primary"}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product-inventory"},[n("v-breadcrumb",{attrs:{nav:t.nav}}),t._v(" "),n("el-card",{attrs:{"body-style":{padding:"20px 45px"}}},[n("el-table",{attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{prop:"spec",label:"规格",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"总库存",align:"center","render-header":t.renderHeader},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{staticStyle:{width:"150px"},on:{change:function(n){t.changeBtnStyle(e.row)}},model:{value:e.row.stock,callback:function(n){t.$set(e.row,"stock",n)},expression:"scope.row.stock"}}),t._v(" "),n("span",[t._v(t._s(t.unitName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{loading:t.btnLoading,type:e.row.btnStyle},on:{click:function(n){t.saveMsg(e.row)}}},[t._v("保存")])]}}])})],1)],1)],1)},staticRenderFns:[]};var s=n("VU/8")(r,i,!1,function(t){n("6+F5")},null,null);e.default=s.exports},"6+F5":function(t,e){}});