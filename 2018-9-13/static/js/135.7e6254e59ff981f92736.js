webpackJsonp([135],{fsrT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),o=a.n(l),r=a("FMx0"),i=a("UU1J"),n=a("EkIv"),s=a("P9l9"),d=a("0xDb"),m=a.n(d),u=a("19nM"),c={components:{vBreadcrumb:r.a,icon:i.a,deleteToast:n.a},data:function(){return{p:{addDealerLevel:!1,updateDealerLevel:!1,deleteDealerLevelById:!1,degradeManage:!1,promotionManage:!1},isShowOperate:!0,tableData:[],height:"",addMask:!1,editMask:!1,form:{name:"",level:"",autoUp:"1",allowGroupStore:"1",allowCreateStore:"1",remark:""},addForm:{name:"",level:"",autoUp:"1",allowGroupStore:"1",allowCreateStore:"1",remark:""},rules:{},title:"添加层级",isShowDelToast:!1,delId:"",delUrl:"",delUri:"",tableLoading:!1,btnLoading:!1,isUp:!1,id:""}},created:function(){this.pControl()},activated:function(){this.getList(),this.pControl()},methods:{pControl:function(){for(var e in this.p)this.p[e]=m.a.pc(u[e]);this.p.updateDealerLevel||this.p.deleteDealerLevelById||this.p.promotionManage||this.p.degradeManage||(this.isShowOperate=!1)},cancel:function(){this.addMask=!1,this.editMask=!1,this.getList()},getList:function(e){var t=this,a={};a.url=u.getDealerLevelList,t.tableLoading=!0,t.$axios.post(s.getDealerLevelList,a).then(function(e){200==e.data.code?(t.tableLoading=!1,t.tableData=e.data.data):(t.$message.warning(e.data.msg),t.tableLoading=!1)}).catch(function(e){console.log(e),t.tableLoading=!1})},addClassify:function(){this.title="添加层级",this.addMask=!0,this.isUp=!1,this.addForm.name="",this.addForm.level="",this.addForm.autoUp="1",this.addForm.allowGroupStore="1",this.addForm.allowCreateStore="1",this.addForm.remark=""},editItem:function(e,t){this.title="编辑层级",this.editMask=!0,t.autoUp=t.autoUp.toString(),t.allowGroupStore=t.allowGroupStore.toString(),t.allowCreateStore=t.allowCreateStore.toString(),this.form=t,this.id=t.id,this.isUp=!0},addOrEdit:function(e){var t=this,a="",l={};l.name=this[e].name,l.level=this[e].level,l.name&&l.level?(l.autoUp=this[e].autoUp,l.allowGroupStore=this[e].allowGroupStore,l.allowCreateStore=this[e].allowCreateStore,l.remark=this[e].remark,this.isUp?(a=s.updateDealerLevel,l.id=this.id,l.url=u.updateDealerLevel):(a=s.addDealerLevel,l.url=u.addDealerLevel),this.btnLoading=!0,this.$axios.post(a,l).then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.btnLoading=!1,t.addMask=!1,t.editMask=!1,t.getList()):(t.btnLoading=!1,t.$message.warning(e.data.msg),t.getList())}).catch(function(e){t.btnLoading=!1,console.log(e)})):this.$message.warning("层级、层级名称不能为空!")},upSet:function(e,t){sessionStorage.setItem("MemberRow",o()(t)),this.$router.push({path:"/promotionManage",query:{MemberRow:o()(t)}})},downSet:function(e,t){sessionStorage.setItem("MemberRow",o()(t)),this.$router.push({path:"/degradeManage",query:{MemberRow:o()(t)}})},delItem:function(e,t){this.delId=t,this.delUrl=s.deleteDealerLevelById,this.delUri=u.deleteDealerLevelById,this.isShowDelToast=!0},deleteToast:function(e){this.isShowDelToast=e,this.getList()},handleIconSuccess:function(e,t){},beforeIconUpload:function(e){this.form.icon=e.name}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"level"},[a("v-breadcrumb",{attrs:{nav:["经销商会员管理","经销商层级管理"]}}),e._v(" "),a("div",{staticClass:"table-block"},[e.p.addDealerLevel?a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.addClassify}},[e._v("添加层级")]):e._e(),e._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"层级编码",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"层级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.level)+"级\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"能否参加拼店",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.allowGroupStore?[e._v("是")]:e._e(),e._v(" "),2==t.row.allowGroupStore?[e._v("否")]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"能否创建店铺",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.allowCreateStore?[e._v("是")]:e._e(),e._v(" "),2==t.row.allowCreateStore?[e._v("否")]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注说明",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否自动晋级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.autoUp?[e._v("是")]:e._e(),e._v(" "),2==t.row.autoUp?[e._v("否")]:e._e()]}}])}),e._v(" "),e.isShowOperate?a("el-table-column",{attrs:{"min-width":"350px",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.p.promotionManage?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.upSet(t.$index,t.row)}}},[e._v("晋级设置")]):e._e(),e._v(" "),e.p.degradeManage?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){e.downSet(t.$index,t.row)}}},[e._v("降级设置")]):e._e(),e._v(" "),e.p.updateDealerLevel?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.editItem(t.$index,t.row)}}},[e._v("编辑\n                        ")]):e._e(),e._v(" "),e.p.deleteDealerLevelById?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.delItem(t.$index,t.row.id)}}},[e._v("删除\n                        ")]):e._e()]}}])}):e._e()],1)]],2),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addMask},on:{"update:visible":function(t){e.addMask=t}}},[a("el-form",{attrs:{"label-width":"100px"},model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[a("el-form-item",{attrs:{prop:"name",label:"名称"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"level",label:"层级"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入数值"},model:{value:e.addForm.level,callback:function(t){e.$set(e.addForm,"level",t)},expression:"addForm.level"}}),e._v(" "),a("span",[e._v("级")])],1),e._v(" "),a("el-form-item",{attrs:{label:"能否参加拼店"}},[a("el-radio-group",{model:{value:e.addForm.allowGroupStore,callback:function(t){e.$set(e.addForm,"allowGroupStore",t)},expression:"addForm.allowGroupStore"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"能否创建店铺"}},[a("el-radio-group",{model:{value:e.addForm.allowCreateStore,callback:function(t){e.$set(e.addForm,"allowCreateStore",t)},expression:"addForm.allowCreateStore"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否晋级"}},[a("el-radio-group",{model:{value:e.addForm.autoUp,callback:function(t){e.$set(e.addForm,"autoUp",t)},expression:"addForm.autoUp"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"remark-area",attrs:{label:"备注说明"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入说明文字"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.addOrEdit("addForm")}}},[e._v("确定保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editMask},on:{"update:visible":function(t){e.editMask=t}}},[a("el-form",{attrs:{"label-width":"100px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("el-form-item",{attrs:{prop:"name",label:"名称"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"level",label:"层级"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入数值"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}}),e._v(" "),a("span",[e._v("级")])],1),e._v(" "),a("el-form-item",{attrs:{label:"能否参加拼店"}},[a("el-radio-group",{model:{value:e.form.allowGroupStore,callback:function(t){e.$set(e.form,"allowGroupStore",t)},expression:"form.allowGroupStore"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"能否创建店铺"}},[a("el-radio-group",{model:{value:e.form.allowCreateStore,callback:function(t){e.$set(e.form,"allowCreateStore",t)},expression:"form.allowCreateStore"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否晋级"}},[a("el-radio-group",{model:{value:e.form.autoUp,callback:function(t){e.$set(e.form,"autoUp",t)},expression:"form.autoUp"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"remark-area",attrs:{label:"备注说明"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入说明文字"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.addOrEdit("form")}}},[e._v("确定保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1),e._v(" "),e.isShowDelToast?a("delete-toast",{attrs:{id:e.delId,uri:e.delUri,url:e.delUrl},on:{msg:e.deleteToast}}):e._e()],1)},staticRenderFns:[]};var v=a("VU/8")(c,p,!1,function(e){a("umtB")},null,null);t.default=v.exports},umtB:function(e,t){}});