webpackJsonp([156],{hmJ7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("mvHQ"),o=a.n(l),i=a("FMx0"),s=a("UU1J"),n=a("EkIv"),r=(a("0xDb"),a("19nM"),a("xnHa")),d=a("GVVA"),c={components:{vBreadcrumb:i.a,icon:s.a,deleteToast:n.a},mixins:[r.b],data:function(){return{tableData:[],page:{currentPage:1,totalPage:0},itype:"",height:"",addMask:!1,editMask:!1,isShowDelToast:!1,btnLoading:!1,formLabelWidth:"100px",form:{name:"",status:"1",img:"",type:""},addForm:{name:"",status:"1",img:"",type:""},id:"",title:"添加一级类目",delId:0,delUrl:"http://api",delUri:""}},created:function(){},activated:function(){this.getList(this.page.currentPage)},methods:{getList:function(t){var e=this,a={page:t,pageSize:this.page.pageSize,level:1,fatherId:0};d.a.queryProductCategoryList(a).then(function(t){e.tableData=[],e.tableData=t.data.data,e.page.totalPage=t.data.totalNum}).catch(function(t){console.log(t)})},addClassify:function(){this.title="添加一级类目",this.addMask=!0,this.addForm.name="",this.addForm.img="",this.addForm.status="1",this.itype="add"},editItem:function(t,e){this.title="编辑一级类目",this.editMask=!0,this.form.name=e.name,this.form.status=e.status.toString(),this.form.img=e.img,this.form.type=e.type.toString(),this.id=e.id,this.itype="edit"},addOrEdit:function(t){var e=this,a="",l={};if(l.name=this[t].name,l.img="http://example.adios.com/a.png",l.status=this[t].status,l.type=this[t].type,l.level=1,l.fatherId=0,l.name){/^[A-Za-z\u4e00-\u9fa5]{2,16}$/.test(l.name)?l.img?("add"==this.itype?a="addProductCategory":(a="modifyProductCategory",l.id=this.id),this.btnLoading=!0,d.a[a](l).then(function(t){e.btnLoading=!1,e.addMask=!1,e.editMask=!1,e.getList(e.page.currentPage)}).catch(function(t){e.btnLoading=!1,console.log(t)})):this.$message.warning("请上传类目图标!"):this.$message.warning("请输入2-16位汉字字母的组合!")}else this.$message.warning("请输入类目名称!")},toSecondClassify:function(t,e){sessionStorage.setItem("secondClassify",o()({name:e.name,id:e.id,type:e.type})),this.$router.push({path:"/secondClassify",query:{name:e.name,id:e.id,type:e.type}})},delItem:function(t,e){this.delId=e,this.delUrl="deleteProductCategory",this.isShowDelToast=!0},deleteToast:function(t){this.isShowDelToast=t,this.getList(this.page.currentPage)},handleAvatarSuccess:function(t,e){"add"==this.itype?this.addForm.img=t.data.imageUrl:this.form.img=t.data.imageUrl},cancel:function(){this.addMask=!1,this.editMask=!1,this.getList(this.page.currentPage)}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"brand-product"},[a("v-breadcrumb",{attrs:{nav:["品牌产品管理","产品分类管理"]}}),t._v(" "),a("div",{staticClass:"table-block"},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:t.addClassify}},[t._v("添加一级类目")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"品类",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"图标",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.img,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"显示/隐藏",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?[t._v("显示")]:2==e.row.type?[t._v("隐藏")]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?[t._v("启用")]:t._e(),t._v(" "),2==e.row.status?[t._v("禁用")]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.toSecondClassify(e.$index,e.row)}}},[t._v("\n                            二级类目\n                        ")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.editItem(e.$index,e.row)}}},[t._v("编辑\n                        ")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.delItem(e.$index,e.row.id)}}},[t._v("删除\n                        ")])]}}])})],1)],t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.page.currentPage,layout:"total, prev, pager, next, jumper",total:t.page.totalPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.addMask},on:{"update:visible":function(e){t.addMask=e}}},[a("el-form",{model:{value:t.addForm,callback:function(e){t.addForm=e},expression:"addForm"}},[a("el-form-item",{attrs:{prop:"name",label:"类目名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}}),t._v(" "),a("span",{staticStyle:{"font-size":"12px",color:"#aaa"}},[t._v("（2-16位汉字字母组合）")])],1),t._v(" "),a("el-form-item",{staticClass:"icon-area",attrs:{prop:"img",label:"类目图标","label-width":t.formLabelWidth}},[a("el-input",{attrs:{readonly:"","auto-complete":"off"},model:{value:t.addForm.img,callback:function(e){t.$set(t.addForm,"img",e)},expression:"addForm.img"}}),t._v(" "),a("el-upload",{staticClass:"icon-uploader",attrs:{action:"/common/upload/oss","on-success":t.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[a("i",{staticClass:"el-icon-upload"}),t._v("上传")])],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"status",label:"状态","label-width":t.formLabelWidth}},[a("el-select",{model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"禁用",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"type",label:"类目类型","label-width":t.formLabelWidth}},[a("el-select",{model:{value:t.addForm.type,callback:function(e){t.$set(t.addForm,"type",e)},expression:"addForm.type"}},[a("el-option",{attrs:{label:"普通类目",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"隐藏类目",value:"2"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.btnLoading,type:"primary"},on:{click:function(e){t.addOrEdit("addForm")}}},[t._v("确 认")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.editMask},on:{"update:visible":function(e){t.editMask=e}}},[a("el-form",{model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[a("el-form-item",{attrs:{prop:"name",label:"类目名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("span",{staticStyle:{"font-size":"12px",color:"#aaa"}},[t._v("（2-16位汉字字母组合）")])],1),t._v(" "),a("el-form-item",{staticClass:"icon-area",attrs:{prop:"img",label:"类目图标","label-width":t.formLabelWidth}},[a("el-input",{attrs:{readonly:"","auto-complete":"off"},model:{value:t.form.img,callback:function(e){t.$set(t.form,"img",e)},expression:"form.img"}}),t._v(" "),a("el-upload",{staticClass:"icon-uploader",attrs:{action:"/common/upload/oss","on-success":t.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[a("i",{staticClass:"el-icon-upload"}),t._v("上传")])],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"status",label:"状态","label-width":t.formLabelWidth}},[a("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"禁用",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"type",label:"类目类型","label-width":t.formLabelWidth}},[a("el-select",{attrs:{disabled:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{label:"普通类目",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"隐藏类目",value:"2"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.btnLoading,type:"primary"},on:{click:function(e){t.addOrEdit("form")}}},[t._v("确 认")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),t._v(" "),t.isShowDelToast?a("delete-toast",{attrs:{id:t.delId,url:t.delUrl,uri:t.delUri},on:{msg:t.deleteToast}}):t._e()],1)},staticRenderFns:[]};var u=a("VU/8")(c,m,!1,function(t){a("z59V")},null,null);e.default=u.exports},z59V:function(t,e){}});