webpackJsonp([5],{"+czO":function(t,i){},"5zde":function(t,i,s){s("zQR9"),s("qyJz"),t.exports=s("FeBl").Array.from},DYx8:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=s("Gu7T"),c=s.n(n),e=s("FMx0"),a=s("DAYN"),o=s.n(a),u=s("9Vdu"),d=(s("F30e"),s("0xDb"),{components:{draggable:o.a,vBreadcrumb:e.a},data:function(){return{cardLoading:!1,disCountId:"",showDisCountList:!1,discountArr:[],activeTab:1,discountList:[],tmpDiscountList:[]}},activated:function(){this.disCountId=this.$route.query.discountAddId||sessionStorage.getItem("discountAddId"),this.discountArr=[],this.discountList=[],this.getGiftDisList(),this.getDisList()},methods:{getGiftDisList:function(){var t=this;this.cardLoading=!0,this.$axios.post(u.u,{id:this.disCountId}).then(function(i){t.discountArr=[],i.data.data.forEach(function(i,s){var n={};n.label=i.couponName,n.value=i.couponId,t.discountArr.push(n)}),t.cardLoading=!1})},submitForm:function(){var t=this,i=[];this.discountArr.forEach(function(t,s){i.push(t.value)}),this.$axios.post(u.h,{id:this.disCountId,couponStr:i.join(",")}).then(function(i){t.$message.success(i.data.msg),t.$router.push("giftManage")})},goBack:function(){this.$router.push("giftManage")},getDisList:function(){var t=this;this.$axios.post(u.t,{}).then(function(i){i.data.data.forEach(function(i,s){"MJ"==i.name?(t.discountList[0]=[],i.list.forEach(function(i,s){var n={};n.label=i.name,n.value=i.id,n.checked=!1,t.discountList[0].push(n)})):"ZK"==i.name?(t.discountList[1]=[],i.list.forEach(function(i,s){var n={};n.label=i.name,n.value=i.id,n.checked=!1,t.discountList[1].push(n)})):"DK"==i.name?(t.discountList[2]=[],i.list.forEach(function(i,s){var n={};n.label=i.name,n.value=i.id,n.checked=!1,t.discountList[2].push(n)})):"DJ"==i.name&&(t.discountList[3]=[],i.list.forEach(function(i,s){var n={};n.label=i.name,n.value=i.id,n.checked=!1,t.discountList[3].push(n)}))})})},getdata:function(t){},datadragEnd:function(t){},tabChange:function(t){this.activeTab=t},checkedDiscount:function(t,i,s){var n=this;i.checked=!i.checked,this.$set(this.discountList[t-1],s,i),this.$set(this.discountList,t-1,this.discountList[t-1]),i.checked?this.tmpDiscountList.push(i):this.tmpDiscountList.forEach(function(t,s){t.value==i.value&&n.tmpDiscountList.splice(s,1)})},getDiscountList:function(){var t;(t=this.discountArr).push.apply(t,c()(this.tmpDiscountList)),this.tmpDiscountList=[],this.discountList.forEach(function(t,i){t.forEach(function(t,i){t.checked=!1})}),this.showDisCountList=!1},delCheckedDiscount:function(t,i){this.discountArr.splice(t,1),this.$message.success("删除成功")}}}),r={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"discount-add"},[s("v-breadcrumb",{attrs:{nav:["品牌产品管理","礼包管理","优惠券管理"]}}),t._v(" "),s("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.cardLoading,expression:"cardLoading"}],attrs:{"body-style":{padding:"30px"}}},[s("span",{staticStyle:{color:"#666"}},[t._v("请选择优惠券:")]),t._v(" "),s("draggable",{staticClass:"draggle",attrs:{move:t.getdata},on:{update:t.datadragEnd},model:{value:t.discountArr,callback:function(i){t.discountArr=i},expression:"discountArr"}},t._l(t.discountArr,function(i,n){return s("div",{key:n},[s("p",{staticClass:"discount-item"},[t._v(t._s(i.label))]),t._v(" "),s("span",{staticClass:"del-discount-button",on:{click:function(s){t.delCheckedDiscount(n,i)}}},[t._v("删除")])])})),t._v(" "),s("p",{staticClass:"add-discount",on:{click:function(i){t.showDisCountList=!0}}},[t._v("+添加优惠券")]),t._v(" "),s("p",{staticStyle:{margin:"30px 0 0 55px"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("保存")]),t._v(" "),s("el-button",{on:{click:t.goBack}},[t._v("取消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"选择优惠券",visible:t.showDisCountList,width:"30%"},on:{"update:visible":function(i){t.showDisCountList=i}}},[s("div",{staticClass:"wrap"},[s("div",{staticClass:"title"},[s("div",{class:{item:!0,"active-item":1==t.activeTab},on:{click:function(i){t.tabChange(1)}}},[t._v("满减券")]),t._v(" "),s("div",{class:{item:!0,"active-item":2==t.activeTab},on:{click:function(i){t.tabChange(2)}}},[t._v("折扣券")]),t._v(" "),s("div",{class:{item:!0,"active-item":3==t.activeTab},on:{click:function(i){t.tabChange(3)}}},[t._v("抵扣券")]),t._v(" "),s("div",{class:{item:!0,"active-item":4==t.activeTab},on:{click:function(i){t.tabChange(4)}}},[t._v("抵价券")])]),t._v(" "),s("div",{staticClass:"con-box"},t._l(t.discountList[t.activeTab-1],function(i,n){return s("p",{key:n,class:{"discount-list":!0,"active-item":i.checked},on:{click:function(s){t.checkedDiscount(t.activeTab,i,n)}}},[t._v(t._s(i.label))])}))]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.getDiscountList}},[t._v("提 交")]),t._v(" "),s("el-button",{on:{click:function(i){t.showDisCountList=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var l=s("VU/8")(d,r,!1,function(t){s("+czO")},null,null);i.default=l.exports},Gu7T:function(t,i,s){"use strict";i.__esModule=!0;var n,c=s("c/Tr"),e=(n=c)&&n.__esModule?n:{default:n};i.default=function(t){if(Array.isArray(t)){for(var i=0,s=Array(t.length);i<t.length;i++)s[i]=t[i];return s}return(0,e.default)(t)}},"c/Tr":function(t,i,s){t.exports={default:s("5zde"),__esModule:!0}},fBQ2:function(t,i,s){"use strict";var n=s("evD5"),c=s("X8DO");t.exports=function(t,i,s){i in t?n.f(t,i,c(0,s)):t[i]=s}},qyJz:function(t,i,s){"use strict";var n=s("+ZMJ"),c=s("kM2E"),e=s("sB3e"),a=s("msXi"),o=s("Mhyx"),u=s("QRG4"),d=s("fBQ2"),r=s("3fs2");c(c.S+c.F*!s("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var i,s,c,l,v=e(t),h="function"==typeof this?this:Array,f=arguments.length,p=f>1?arguments[1]:void 0,m=void 0!==p,g=0,b=r(v);if(m&&(p=n(p,f>2?arguments[2]:void 0,2)),void 0==b||h==Array&&o(b))for(s=new h(i=u(v.length));i>g;g++)d(s,g,m?p(v[g],g):v[g]);else for(l=b.call(v),s=new h;!(c=l.next()).done;g++)d(s,g,m?a(l,p,[c.value,g],!0):c.value);return s.length=g,s}})}});