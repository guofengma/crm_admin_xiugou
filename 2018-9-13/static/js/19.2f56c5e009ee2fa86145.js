webpackJsonp([19],{"C44+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("FMx0"),i=s("UU1J"),l=s("tF3a"),r=s("GVVA"),d={components:{icon:i.a,region:l.a},props:{id:{require:!0},dealer:{require:!0}},data:function(){return{address:"",form:{},phone:!0,idCard:!0,img:""}},created:function(){var e=[];this.dealer.province_id&&(e.push(this.dealer.province_id,this.dealer.city_id,this.dealer.area_id),this.address=e),this.img=this.dealer.head_img},methods:{getRegion:function(e){this.address=e},closeToask:function(){this.$emit("msg",!1)},handleAvatarSuccess:function(e,t){this.img=e.data.imageUrl,this.dealer.head_img=e.data.imageUrl},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||this.$message.error("请上传jpg，png格式!"),t},textPhone:function(){if(!/^1[3-8]\d{9}$/.test(this.dealer.phone))return this.$message.warning("请输入正确的手机号格式!"),this.phone=!1,!1;this.phone=!0},testIdCard:function(){if(!/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X|x)$/.test(this.dealer.idcard))return this.$message.warning("请输入正确的身份证号!"),this.idCard=!1,!1;this.idCard=!0},submitForm:function(e){var t=this,s={};if(s.id=t.id,s.address=t.dealer.address,s.address=t.dealer.address,s.headImg=t.img,s.idcard=t.dealer.idcard,s.nickname=t.dealer.nickname,s.phone=t.dealer.phone,s.wechatId=t.dealer.wechatId,s.realname=t.dealer.realname,s.updateType=1,t.address&&(s.provinceId=t.address[0],t.address[1]?s.cityId=t.address[1]:s.cityId="",t.address[2]?s.areaId=t.address[2]:s.areaId=""),!1===t.phone||!1===t.idCard)return!1;t.addrPreFix=t.address,r.a.updateDealerById(s).then(function(e){t.btnLoading=!1,t.$message.success(e.msg),t.$emit("msg",!1)}).catch(function(e){t.$emit("msg",!1),t.btnLoading=!1,console.log(e)}),t.closeToask()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-basic-mask"},[a("div",{staticClass:"box"},[a("div",{staticClass:"mask-title"},[e._v("基础信息编辑")]),e._v(" "),a("div",{staticClass:"mask-content"},[a("el-form",[a("div",{staticClass:"left"},[a("div",{staticClass:"form-item"},[a("el-form-item",{attrs:{label:"用户ID"}},[e._v("\n                            "+e._s(e.dealer.id)+"\n                        ")]),e._v(" "),a("el-form-item",{staticClass:"special",attrs:{label:"微信openid"}},[a("div",{attrs:{title:e.dealer.openid}},[e._v(e._s(e.dealer.openid))])])],1),e._v(" "),a("div",{staticClass:"form-item"},[a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{attrs:{placeholder:"请输入昵称",size:"medium"},model:{value:e.dealer.nickname,callback:function(t){e.$set(e.dealer,"nickname",t)},expression:"dealer.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信号"}},[a("el-input",{attrs:{placeholder:"请输入微信号",size:"medium"},model:{value:e.dealer.wechatId,callback:function(t){e.$set(e.dealer,"wechatId",t)},expression:"dealer.wechatId"}})],1)],1),e._v(" "),a("div",{staticClass:"form-item"},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"请输入用户姓名",size:"medium"},model:{value:e.dealer.realname,callback:function(t){e.$set(e.dealer,"realname",t)},expression:"dealer.realname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"请输入手机号",size:"medium"},on:{blur:e.textPhone},model:{value:e.dealer.phone,callback:function(t){e.$set(e.dealer,"phone",t)},expression:"dealer.phone"}})],1)],1),e._v(" "),a("div",{staticClass:"form-item"},[a("el-form-item",{attrs:{label:"身份证号"}},[a("el-input",{attrs:{placeholder:"请输入身份证号码",size:"medium"},on:{blur:e.testIdCard},model:{value:e.dealer.idcard,callback:function(t){e.$set(e.dealer,"idcard",t)},expression:"dealer.idcard"}})],1)],1),e._v(" "),a("div",{staticClass:"form-item address-area"},[a("el-form-item",{attrs:{label:"地址信息"}},[a("region",{attrs:{regionMsg:e.address},on:{regionMsg:e.getRegion}}),e._v(" "),a("el-input",{staticClass:"lar-inp",attrs:{placeholder:"详细地址...",size:"medium"},model:{value:e.dealer.address,callback:function(t){e.$set(e.dealer,"address",t)},expression:"dealer.address"}})],1)],1)]),e._v(" "),a("div",{staticClass:"right"},[e.img?a("img",{attrs:{src:e.img,alt:""}}):a("img",{attrs:{src:s("iQH9"),alt:""}}),e._v(" "),a("el-upload",{attrs:{action:"/admin/ossClient/aliyunOSSUploadImage","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{type:"primary"}},[e._v("编辑头像")])],1),e._v(" "),a("div",{staticClass:"tip"},[e._v("请上传jpg，png格式")])],1),e._v(" "),a("div",{staticClass:"clearfix"}),e._v(" "),a("el-form-item",{staticClass:"submit-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确认修改")]),e._v(" "),a("el-button",{on:{click:e.closeToask}},[e._v("取消")])],1)],1)],1)])])},staticRenderFns:[]};var o=s("VU/8")(d,n,!1,function(e){s("q15d")},null,null).exports,c={components:{icon:i.a},props:{id:{require:!0},dealer:{require:!0}},data:function(){return{isUpdateUperMask:!1,levelList:[],num:"",oldId:"",btnLoading:!1}},created:function(){this.getLevelList(),this.dealer.level=this.dealer.levelId,this.oldId=this.dealer.id,this.dealer.dtype=this.dealer.dtype.toString()},methods:{getLevelList:function(){var e=this;r.a.getUserLevelList({}).then(function(t){for(var s in e.levelList=t.data,t.data)e.dealer.levelId===t.data[s].id&&(e.num=s)}).catch(function(e){console.log(e)})},closeToask:function(){this.$emit("msg",!1)},submitForm:function(){var e=this;this.closeToask();var t={};t.id=this.id,t.levelId=this.dealer.level,t.upUserid=this.dealer.upUserName,t.updateType=2,this.btnLoading=!0,r.a.updateDealerById(t).then(function(t){e.btnLoading=!1,e.$message.success(t.msg),e.$emit("msg",!1),console.log(t)}).catch(function(t){e.$emit("msg",!1),e.btnLoading=!1,console.log(t)})},sureUpdate:function(){this.oldId!=this.dealer.id&&(this.isUpdateUperMask=!0)},closeUpdateUperMask:function(e){this.isUpdateUperMask=!1,e||(this.dealer.id=this.oldId)}}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"edit-author-mask"},[s("div",{staticClass:"box"},[s("div",{staticClass:"mask-title"},[e._v("授权信息编辑")]),e._v(" "),s("div",{staticClass:"mask-content"},[s("el-form",[s("el-form-item",{staticClass:"special",attrs:{label:"授权码:"}},[e._v("\n                    "+e._s(e.dealer.code)+"\n                ")]),e._v(" "),s("el-form-item",{staticClass:"special",attrs:{label:"授权层级"}},[s("el-select",{attrs:{placeholder:"全部层级"},model:{value:e.dealer.level,callback:function(t){e.$set(e.dealer,"level",t)},expression:"dealer.level"}},e._l(e.levelList,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{staticClass:"special",attrs:{label:"上级代理:"}},[s("el-input",{attrs:{size:"medium"},on:{blur:e.sureUpdate},model:{value:e.dealer.upUserName,callback:function(t){e.$set(e.dealer,"upUserName",t)},expression:"dealer.upUserName"}}),e._v(" "),s("span",{staticClass:"tip"},[e._v("请输入上级代理")])],1)],1)],1),e._v(" "),s("div",{staticClass:"submit-btn"},[s("div",{staticStyle:{"margin-left":"-73px",width:"100%"}},[s("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.submitForm("form")}}},[e._v("确认修改")]),e._v(" "),s("el-button",{on:{click:e.closeToask}},[e._v("取消")])],1)])]),e._v(" "),e.isUpdateUperMask?s("div",{staticClass:"sure-mask"},[s("div",{staticClass:"smallbox"},[s("div",{staticClass:"mask-title"},[s("icon",{staticClass:"ico",attrs:{ico:"icon-jinggao"}}),e._v("\n                温馨提示\n            ")],1),e._v(" "),s("div",{staticClass:"mask-content"},[s("span",{staticClass:"del-tip"},[e._v("是否确认修改TA的上级代理")]),e._v(" "),s("div",{staticClass:"del-btn-group"},[s("el-button",{staticClass:"del-btn",attrs:{type:"danger"},on:{click:function(t){e.closeUpdateUperMask(!0)}}},[e._v("确认修改")]),e._v(" "),s("el-button",{on:{click:function(t){e.closeUpdateUperMask(!1)}}},[e._v("取消")])],1)])])]):e._e()])},staticRenderFns:[]};var m=s("VU/8")(c,v,!1,function(e){s("KoIK")},null,null).exports,u=(s("P9l9"),{components:{icon:i.a,vBreadcrumb:a.a,editBasic:o,editAuthor:m},data:function(){return{dealer:{},dynamicTags:[],inputVisible:!1,inputValue:"",isShowEditBasic:!1,isShowEditAuthor:!1,formLabelWidth:"100px",id:"",loading:!1,storeId:"",otherStore:"",myStore:"",money:0}},activated:function(){this.id=this.$route.query.id||sessionStorage.getItem("memberDetail"),this.getDetail()},methods:{basicToast:function(e){var t=this;t.isShowEditBasic=e,setTimeout(function(){t.getDetail()},2e3)},authorToast:function(e){var t=this;t.isShowEditAuthor=e,setTimeout(function(){t.getDetail()},2e3)},getDetail:function(){var e=this,t={id:this.id};this.loading=!0,r.a.findDealerById(t).then(function(t){e.dealer=t.data}).catch(function(e){console.log(e)})},backToList:function(){this.$router.push("/memberManage")},updateBasicInf:function(){this.isShowEditBasic=!0},updateAuthorInf:function(){this.isShowEditAuthor=!0},btnClicked:function(e){var t=this.id;sessionStorage.setItem("memberId",t),this.$router.push({path:e,query:{memberId:t}})},shopInfo:function(){sessionStorage.setItem("shopInfoId",this.storeId),this.$router.push({name:"shopInfo",query:{shopInfoId:this.storeId}})},realName:function(){sessionStorage.setItem("memberId",this.id),this.$router.push({name:"realNameInfo",query:{memberId:this.id}})}}}),_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-breadcrumb",{attrs:{nav:["经销商会员管理","会员管理","会员详情"]}}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"basic-inf-area line"},[a("div",{staticClass:"left"},[e._m(0),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("会员ID："+e._s(e.dealer.id))]),e._v(" "),a("div",{staticClass:"item"},[e._v("微信openid："+e._s(e.dealer.openid))])]),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("昵称："+e._s(e.dealer.nickname))]),e._v(" "),a("div",{staticClass:"item"},[e._v("微信号："+e._s(e.dealer.wechatId))])]),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("手机号："+e._s(e.dealer.phone))])]),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("姓名："+e._s(e.dealer.realname))]),e._v(" "),a("div",{staticClass:"item"},[e._v("身份证号："+e._s(e.dealer.idcard))])]),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("地址信息 ："+e._s(e.dealer.addrPreFix)+e._s(e.dealer.address))])]),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("注册时间："+e._s(e._f("formatDate")(e.dealer.regTime)))]),e._v(" "),a("div",{staticClass:"item"},[e._v("最近登录时间："+e._s(e._f("formatDate")(e.dealer.lastLoginTime)))])])]),e._v(" "),a("div",{staticClass:"center"},[a("el-button",{on:{click:e.updateBasicInf}},[e._v("修改")])],1),e._v(" "),a("div",{staticClass:"right"},[a("div",[e.dealer.head_img?a("img",{staticClass:"img",attrs:{src:e.dealer.head_img,alt:""}}):a("img",{staticClass:"img",attrs:{src:s("iQH9"),alt:""}})]),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"primary"},on:{click:function(t){e.btnClicked("/memberTree")}}},[e._v("查看会员树状图\n                    ")])],1),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"primary"},on:{click:e.realName}},[e._v("实名信息\n                    ")])],1)]),e._v(" "),a("div",{staticClass:"clearfix"})]),e._v(" "),a("div",{staticClass:"author-inf-area line"},[a("div",{staticClass:"left"},[e._m(1),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("上级代理："+e._s(e.dealer.upUserName))]),e._v(" "),a("div",{staticClass:"item"},[e._v("会员类型：\n                        "),1==e.dealer.dtype?a("span",[e._v("网信经销商")]):e._e(),e._v(" "),2==e.dealer.dtype?a("span",[e._v("供货经销商")]):e._e(),e._v(" "),3==e.dealer.dtype?a("span",[e._v("网红经销商")]):e._e()])]),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("授权码："+e._s(e.dealer.code))]),e._v(" "),a("div",{staticClass:"item"},[e._v("授权层级："+e._s(e.dealer.levelName))])]),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("经验值："+e._s(e.dealer.experience))])])]),e._v(" "),a("div",{staticClass:"center"},[a("el-button",{on:{click:e.updateAuthorInf}},[e._v("修改")])],1),e._v(" "),a("div",{staticClass:"clearfix"})]),e._v(" "),a("div",{staticClass:"line"},[a("div",{staticClass:"left"},[e._m(2),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[e._v("参与店铺："+e._s(e.otherStore))]),e._v(" "),a("div",{staticClass:"item"},[e._v("开设店铺："+e._s(e.myStore))])])]),e._v(" "),a("div",{staticClass:"clearfix"})]),e._v(" "),e._m(3),e._v(" "),a("div",{staticClass:"promote-inf-area line"},[a("div",{staticClass:"left"},[e._m(4),e._v(" "),a("div",{staticClass:"item-row"},[a("div",{staticClass:"item"},[a("span",[e._v("消费金额"+e._s(e.money)+"元")])])])]),e._v(" "),a("div",{staticClass:"clearfix"})]),e._v(" "),a("div",{staticStyle:{margin:"50px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.backToList}},[e._v("返回列表")])],1)]),e._v(" "),e.isShowEditBasic?a("edit-basic",{attrs:{dealer:e.dealer,id:e.id},on:{msg:e.basicToast}}):e._e(),e._v(" "),e.isShowEditAuthor?a("edit-author",{attrs:{dealer:e.dealer,id:e.id},on:{msg:e.authorToast}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("基础信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("授权信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("拼店信息")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"promote-inf-area line"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[s("h3",[e._v("晋升记录")])]),e._v(" "),s("div",{staticClass:"item-row"},[s("div",{staticClass:"item"},[s("span",[e._v("实习省代--省级代理")]),e._v(" "),s("span",{staticStyle:{"margin-left":"20px"}},[e._v("2018-05-12 12:32:31")])])]),e._v(" "),s("div",{staticClass:"item-row"},[s("div",{staticClass:"item"},[s("span",[e._v("实习省代--省级代理")]),e._v(" "),s("span",{staticStyle:{"margin-left":"20px"}},[e._v("2018-05-12 12:32:31")])])])]),e._v(" "),s("div",{staticClass:"clearfix"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h3",[this._v("其他信息")])])}]};var h=s("VU/8")(u,_,!1,function(e){s("dhan")},"data-v-632ef938",null);t.default=h.exports},KoIK:function(e,t){},dhan:function(e,t){},q15d:function(e,t){}});