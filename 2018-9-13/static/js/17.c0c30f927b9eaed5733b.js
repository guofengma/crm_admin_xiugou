webpackJsonp([17],{"7SHl":function(e,t,a){"use strict";a.d(t,"f",function(){return i}),a.d(t,"c",function(){return r}),a.d(t,"g",function(){return o}),a.d(t,"b",function(){return n}),a.d(t,"a",function(){return l}),a.d(t,"d",function(){return s}),a.d(t,"e",function(){return d});var i="/admin/featured/queryFeaturedList",r="/admin/featured/findFeaturedById",o="/admin/featured/updateFeatured",n="/admin/featured/deleteFeatured",l="/admin/featured/addFeatured",s="/admin/product/findProductNameByProdCode",d="/admin/topic/getNameById"},FE4z:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"queryFeaturedList",function(){return i}),a.d(t,"findFeaturedById",function(){return r}),a.d(t,"updateFeatured",function(){return o}),a.d(t,"deleteFeatured",function(){return n}),a.d(t,"addFeatured",function(){return l}),a.d(t,"findProductNameByProdCode",function(){return s});var i="/admin/featured/queryFeaturedList",r="/admin/featured/findFeaturedById",o="/admin/featured/updateFeatured",n="/admin/featured/deleteFeatured",l="/admin/featured/addFeatured",s="/admin/product/findProductNameByProdCode"},bn0B:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),r=a.n(i),o=a("exGp"),n=a.n(o),l=a("FMx0"),s=a("UU1J"),d=a("EkIv"),u=a("7SHl"),c=a("0xDb"),m=a.n(c),p=a("FE4z"),f=a("xnHa"),g={components:{vBreadcrumb:l.a,icon:s.a,deleteToast:d.a},mixins:[f.b,f.c],data:function(){return{p:{addFeatured:!1,updateFeatured:!1,deleteFeatured:!1},isShowOperate:!0,tableData:[],height:"",addMask:!1,editMask:!1,isShowDelToast:!1,form:{img:"",imgUrl:"",linkType:"",linkTypeValue:"",remark:"",position:""},addForm:{img:"",imgUrl:"",linkType:"",linkTypeValue:"",remark:"",position:""},id:"",itemId:"",name:"",itype:"",delId:"",delUrl:"",delUri:"",showDetail:!1,productName:"",pageType:"",proId:!0,linkTypeList:[]}},created:function(){var e=window.screen.availHeight-500;this.height=e,this.pControl()},activated:function(){this.pControl(),this.pageType=this.$route.query.pageType||sessionStorage.getItem("pageType"),this.getList()},methods:{pControl:function(){for(var e in this.p)this.p[e]=m.a.pc(p[e]);this.p.updateFeatured||this.p.deleteFeatured||(this.isShowOperate=!1)},getList:function(){var e=this,t={page:this.page.currentPage,pageType:this.pageType,url:p.queryFeaturedList};this.$axios.post(u.f,t).then(function(t){200==t.data.code?(e.tableData=[],e.tableData=t.data.data.data,e.page.totalPage=t.data.data.resultCount):e.$message.warning(t.data.msg)}).catch(function(e){console.log(e)})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e),this.page.currentPage=e,this.getList(e)},addClassify:function(){var e=this;return n()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.addMask=!0,e.addForm.imgUrl="",e.addForm.img="",e.addForm.linkType="",e.addForm.linkTypeValue="",e.productName="",e.addForm.remark="",e.addForm.position="",e.itype="add",e.proId=!0,t.next=12,e.queryDictonary(9);case 12:e.linkTypeList=e.tmpAxiosData;case 13:case"end":return t.stop()}},t,e)}))()},editItem:function(e){var t=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.editMask=!0,t.itemId=e.id,t.getDetail(e.id),t.itype="edit",t.productName="",t.proId=!0,a.next=8,t.queryDictonary(9);case 8:t.linkTypeList=t.tmpAxiosData;case 9:case"end":return a.stop()}},a,t)}))()},addOrEdit:function(e){var t=this,a="",i={};if(i.imgUrl=this[e].imgUrl,i.linkType=this[e].linkType,i.linkTypeValue=this[e].linkTypeValue,i.pageType=this.pageType,i.remark=this[e].remark,i.position=this[e].position,i.imgUrl)if(i.linkType)if(i.linkTypeValue)if(i.position){if(!this.proId)return!1;"add"==this.itype?(a=u.a,i.url=p.addFeatured):(a=u.g,i.id=this.itemId,i.url=p.updateFeatured),this.btnLoading=!0,this.$axios.post(a,i).then(function(e){200==e.data.code?(t.$message.success(e.data.msg),t.btnLoading=!1,t.addMask=!1,t.editMask=!1,t.getList()):(t.btnLoading=!1,t.$message.warning(e.data.msg),t.getList())}).catch(function(e){console.log(e)})}else this.$message.warning("请输入排序!");else this.$message.warning("请输入ID!");else this.$message.warning("请选择类型!");else this.$message.warning("请上传图片!")},delItem:function(e){this.delId=e,this.delUrl=u.b,this.delUri=p.deleteFeatured,this.isShowDelToast=!0},deleteToast:function(e){this.isShowDelToast=e,this.getList()},handleAvatarSuccess:function(e,t){"add"==this.itype?(this.addForm.img=e.data.imageUrl,this.addForm.imgUrl=e.data.imageUrl):(this.form.img=e.data.imageUrl,this.form.imgUrl=e.data.imageUrl)},cancel:function(){this.addMask=!1,this.editMask=!1,this.getList()},searchProduct:function(){var e=this,t={},a="";this.productName="","add"==this.itype?1==this.addForm.linkType?(t.prodCode=this.addForm.linkTypeValue,a=u.d):(t.id=Number(this.addForm.linkTypeValue),a=u.e):1==this.form.linkType?(t.prodCode=this.form.linkTypeValue,a=u.d):(t.id=Number(this.form.linkTypeValue),a=u.e),this.$axios.post(a,t).then(function(t){e.showDetail=!0,e.productName=t.data.data,e.proId=!0}).catch(function(t){console.log(t),e.proId=!1})},getDetail:function(e){var t=this,a={id:e,pageType:this.pageType};this.$axios.post(u.c,a).then(function(e){t.form=e.data.data,t.form.img=t.form.imgUrl,t.form.linkType=t.form.linkType.toString()}).catch(function(e){console.log(e)})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"second-classify"},[a("v-breadcrumb",{attrs:{nav:["运营管理","推荐位管理","推荐产品管理"]}}),e._v(" "),a("div",{staticClass:"table-block"},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.addClassify}},[e._v("添加banner图片")]),e._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.height,border:""}},[a("el-table-column",{attrs:{type:"index",label:"编号",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.img_url,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"img_url",label:"链接",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"排序位置",align:"center"}}),e._v(" "),e.isShowOperate?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){e.editItem(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.delItem(t.row.id)}}},[e._v("删除")])]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,layout:"total, prev, pager, next, jumper",total:e.page.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]],2),e._v(" "),a("el-dialog",{attrs:{title:"添加banner图片",visible:e.addMask},on:{"update:visible":function(t){e.addMask=t}}},[a("el-form",{attrs:{"label-width":"100px"},model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[a("el-form-item",{staticClass:"icon-area",attrs:{label:"选择banner图"}},[a("el-input",{attrs:{readonly:"",placeholder:"上传图片","auto-complete":"off"},model:{value:e.addForm.img,callback:function(t){e.$set(e.addForm,"img",t)},expression:"addForm.img"}}),e._v(" "),a("el-upload",{staticClass:"icon-uploader",attrs:{action:"/admin/ossClient/aliyunOSSUploadImage","on-success":e.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[a("i",{staticClass:"el-icon-upload"}),e._v("上传")])],1)],1),e._v(" "),a("div",{staticClass:"inf-area"},[a("img",{staticClass:"banner-img",attrs:{src:e.addForm.imgUrl,alt:""}}),e._v(" "),a("div",{staticClass:"tips"},[e._v("建议图片尺寸350px*350px")])]),e._v(" "),a("el-form-item",{attrs:{label:"请选择类型"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.addForm.linkType,callback:function(t){e.$set(e.addForm,"linkType",t)},expression:"addForm.linkType"}},e._l(e.linkTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.dValue,value:e.dKey}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"请输入ID"}},[a("el-input",{attrs:{placeholder:"请输入ID","auto-complete":"off"},on:{change:e.searchProduct},model:{value:e.addForm.linkTypeValue,callback:function(t){e.$set(e.addForm,"linkTypeValue",t)},expression:"addForm.linkTypeValue"}})],1),e._v(" "),a("div",{staticClass:"inf-area"},[e._v(e._s(e.productName))]),e._v(" "),a("el-form-item",{attrs:{label:"备注说明"}},[a("el-input",{attrs:{placeholder:"请输入备注说明","auto-complete":"off"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序位置"}},[a("el-input",{attrs:{placeholder:"请输入排序位置","auto-complete":"off"},model:{value:e.addForm.position,callback:function(t){e.$set(e.addForm,"position",t)},expression:"addForm.position"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEdit("addForm")}}},[e._v("确 认")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑banner图片",visible:e.editMask},on:{"update:visible":function(t){e.editMask=t}}},[a("el-form",{attrs:{"label-width":"100px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("el-form-item",{staticClass:"icon-area",attrs:{label:"选择banner图"}},[a("el-input",{attrs:{readonly:"",placeholder:"上传图片","auto-complete":"off"},model:{value:e.form.img,callback:function(t){e.$set(e.form,"img",t)},expression:"form.img"}}),e._v(" "),a("el-upload",{staticClass:"icon-uploader",attrs:{action:"/admin/ossClient/aliyunOSSUploadImage","on-success":e.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[a("i",{staticClass:"el-icon-upload"}),e._v("上传")])],1)],1),e._v(" "),a("div",{staticClass:"inf-area"},[a("img",{staticClass:"banner-img",attrs:{src:e.form.imgUrl,alt:""}}),e._v(" "),a("div",{staticClass:"tips"},[e._v("建议图片尺寸350px*350px")])]),e._v(" "),a("el-form-item",{attrs:{label:"请选择类型"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.form.linkType,callback:function(t){e.$set(e.form,"linkType",t)},expression:"form.linkType"}},e._l(e.linkTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.dValue,value:e.dKey}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"请输入ID"}},[a("el-input",{attrs:{placeholder:"请输入ID","auto-complete":"off"},on:{change:e.searchProduct},model:{value:e.form.linkTypeValue,callback:function(t){e.$set(e.form,"linkTypeValue",t)},expression:"form.linkTypeValue"}})],1),e._v(" "),a("div",{staticClass:"inf-area"},[e._v(e._s(e.productName))]),e._v(" "),a("el-form-item",{attrs:{label:"备注说明"}},[a("el-input",{attrs:{placeholder:"请输入备注说明","auto-complete":"off"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序位置"}},[a("el-input",{attrs:{placeholder:"请输入排序位置","auto-complete":"off"},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEdit("form")}}},[e._v("确 认")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),e.isShowDelToast?a("delete-toast",{attrs:{id:e.delId,url:e.delUrl,uri:e.delUri},on:{msg:e.deleteToast}}):e._e()],1)},staticRenderFns:[]};var v=a("VU/8")(g,h,!1,function(e){a("p/P4")},null,null);t.default=v.exports},"p/P4":function(e,t){}});