webpackJsonp([87],{"0rJa":function(e,t){},s5bX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("FMx0"),i=a("EkIv"),o=a("P9l9"),l=a("0xDb"),s=a.n(l),r=a("19nM"),d=a("xnHa"),c={components:{breadcrumb:n.a,deleteToast:i.a},mixins:[d.b],data:function(){return{p:{addRole:!1,updateRole:!1,deleteRole:!1},isShowOperate:!0,nav:["岗位管理","岗位权限管理"],tableLoading:!1,isShowDelToast:!1,departmentId:"",delId:66,delUrl:"http://api",delUri:"",tableData:[]}},created:function(){var e=window.screen.availHeight-360;this.height=e,this.pControl()},activated:function(){this.departmentId=this.$route.params.id||sessionStorage.getItem("jobsPermissionMangeId"),this.pControl(),this.getList(this.page.currentPage)},methods:{pControl:function(){for(var e in this.p)this.p[e]=s.a.pc(r[e]);this.p.updateRole||this.p.deleteRole||(this.isShowOperate=!1)},getList:function(e){var t=this,a=this,n={};n.id=this.departmentId,n.page=e,n.url=r.jobsPermissionMange,this.tableLoading=!0,this.$axios.post(o.queryRolePageList,n).then(function(e){a.tableLoading=!1,200==e.data.code?(t.tableData=[],t.tableData=e.data.data.data,t.page.totalPage=e.data.data.resultCount):t.$message.warning(e.data.msg)}).catch(function(e){console.log(e),a.tableLoading=!1})},addRole:function(){this.$router.push("addJobsPermission")},editRole:function(e){sessionStorage.setItem("editJobsPermission",e.id),this.$router.push({name:"editJobsPermission",params:{userId:e.id}})},deleteRole:function(e){this.delId=e.id,this.delUrl=o.deleteRole,this.delUri=r.deleteRole,this.isShowDelToast=!0},deleteToast:function(e){this.getList(this.page.currentPage),this.isShowDelToast=e}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("breadcrumb",{attrs:{nav:e.nav}}),e._v(" "),a("el-card",[e.p.addRole?a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加岗位")]):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"w-table",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData,height:e.height,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rname",label:"角色名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dname",label:"部门",align:"center"}}),e._v(" "),e.isShowOperate?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.p.updateRole?a("el-button",{attrs:{type:"warning"},on:{click:function(a){e.editRole(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),e.p.deleteRole?a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.deleteRole(t.row)}}},[e._v("删除")]):e._e()]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,layout:"total, prev, pager, next, jumper",total:e.page.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.isShowDelToast?a("delete-toast",{attrs:{id:e.delId,url:e.delUrl,uri:e.delUri},on:{msg:e.deleteToast}}):e._e()],1)},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(e){a("0rJa")},null,null);t.default=p.exports}});